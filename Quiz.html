<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Devinez les raisons du silence</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 600px;
      margin: auto;

      background-image: url('https://avantpost-cpu.github.io/depot-quiz/fond.jpg');
      background-repeat: repeat;
      background-size: auto;
    }

    #instructions { margin-bottom: 20px; font-size: 16px; line-height: 1.5; }

    .question {
      margin-bottom: 25px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: rgba(255,255,255,0.9);
    }

    button {
      display: block;
      margin: 5px 0;
      padding: 10px;
      width: 100%;
      cursor: pointer;
      border-radius: 5px;
      border: none;
      font-size: 15px;
    }

    button:hover { background: #f0f0f0; }

    #startBtn, #nextBtn {
      background-color: #4f918d;
      color: white;
      font-weight: bold;
      padding: 12px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      display: block;
      margin: 20px auto;
      width: 220px;
      text-align: center;
    }

    #startBtn:hover, #nextBtn:hover { background-color: #3e736b; }

    .correct { color: green; font-weight: bold; }
    .wrong { color: red; font-weight: bold; }

    #score {
      font-size: 18px;
      font-weight: bold;
      text-align: center;
      margin-top: 20px;
      display: none;
    }

    #progress {
      text-align: center;
      margin-bottom: 10px;
      font-weight: bold;
      display: none;
    }

    .result-img {
      max-width: 50%;
      height: auto;
      display: block;
      margin: 20px auto 0 auto;
    }
  </style>
</head>

<body>

  <!-- ✔ IMAGE À LA PLACE DU TITRE -->
  <div style="text-align:center; margin-bottom:20px;">
    <img src="https://avantpost-cpu.github.io/depot-quiz/raisons.png"
         alt="Raisons du silence"
         style="max-width:100%; height:auto;">
  </div>

  <p id="instructions">
    Ce quiz vous invite à comprendre pourquoi certaines victimes gardent le silence dans le milieu sportif.
    Le temps de réponse et une correction apparaîtront après chaque réponse.
  </p>

  <button id="startBtn">Commencer le quiz</button>

  <div id="progress"></div>
  <div id="quiz"></div>
  <div id="score"></div>
  <div id="resultImage"></div>

  <button id="nextBtn" style="display:none;">Question suivante</button>

  <script>
    /* ---------------------------
       QUESTIONS + CORRECTIONS
       --------------------------- */
    var questions = [
      { text: "Quelles raisons peuvent conduire une victime à ne pas révéler ce qu’elle subit ?", answers: ["L’agresseur menace la carrière","Trop d’entraînements","Préférence pour la discrétion"], correct: 0 },
      { text: "Pourquoi le sentiment de loyauté vis-à-vis du club peut pousser au silence ?", answers: ["Par peur de nuire à l’image ou l’ambiance du club","Veut devenir capitaine","Pense que personne n’écoute"], correct: 0 },
      { text: "En quoi le silence peut-il aussi conduire à des menaces physiques sur son propre corps ?", answers: ["Ne pas intervenir en cas de blessure","Entraînements supplémentaires","Récompenses"], correct: 0 },
      { text: "En quoi une forme de pression exercée par la famille peut conduire au silence ?", answers: ["Peur de décevoir ou ne pas être cru","Famille encourage à parler","Famille indifférente"], correct: 0 },
      { text: "Dans quelle mesure la “culture de l’effort” peut elle aussi contribuer à pousser au silence ?", answers: ["Violences perçues comme rite","Blessures toujours soignées","Douleur ignorée par coach"], correct: 0 },
      { text: "Pourquoi le silence est-il renforcé dans une société qui valorise les valeurs de virilité ?", answers: ["Honte de montrer vulnérabilité","Veut prouver sa force","Personne ne remarquera"], correct: 0 },
      { text: "Pourquoi certaines victimes gardent-elles le silence face aux institutions ?", answers: ["Plaintes mal traitées","Préfère amis","Cherche conseils sportifs"], correct: 0 }
    ];

    var corrections = [
      "De nombreuses victimes se taisent en raison de menaces liées à leur carrière, à des représailles ou au contrôle exercé par l’agresseur.",
      "La peur de nuire au club, à ses membres ou à son entraîneur empêche parfois les victimes de parler.",
      "Le silence peut entraîner des risques physiques : blessures non traitées, absence d’intervention, aggravation de la situation.",
      "La crainte de décevoir la famille ou de ne pas être prise au sérieux contribue fortement au silence.",
      "Les violences peuvent être perçues comme un rite, comme une condition sine qua non, parce que la valorisation de l’effort peut pousser à banaliser la souffrance et donc la violence.",
      "La vulnérabilité est perçue comme une faiblesse ce qui peut conduire les victimes à développer un sentiment de honte, parce que la domination fait partie intégrante du système et elle est intériorisée comme une norme sociale.",
      "Les plaintes mal-traitées et la maltraitance des institutions (délais de rendez-vous, de prise en charge, des procédures judiciaires, administratives ou médicales) constituent une forme de victimisation secondaire parfois encore plus violente. Parce que les chiffres des % d’instruction, de procès et de condamnation ne sont pas en faveur des victimes. Parce que l’institution peut aussi parfois étouffée, passée sous silence pour ne pas faire de vagues et ne pas nuire à l’image de celle-ci, on appelle cela l’omerta."
    ];

    var currentQuestion = 0;
    var score = 0;
    var startTime = 0;

    var quizContainer = document.getElementById("quiz");
    var progressContainer = document.getElementById("progress");
    var startBtn = document.getElementById("startBtn");
    var nextBtn = document.getElementById("nextBtn");
    var scoreContainer = document.getElementById("score");
    var resultImage = document.getElementById("resultImage");

    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    /* ---------------------------
       AFFICHAGE DE LA QUESTION
       --------------------------- */
    function showQuestion() {
      nextBtn.style.display = "none";

      if (currentQuestion >= questions.length) {
        quizContainer.innerHTML = "";
        progressContainer.textContent = "";
        scoreContainer.style.display = "block";
        scoreContainer.textContent = "Résultat final : " + score + " / " + questions.length;

        resultImage.innerHTML =
          score >= 5
            ? '<img src="bravo.png" class="result-img">'
            : '<img src="progres.png" class="result-img">';

        return;
      }

      var q = questions[currentQuestion];
      var answers = q.answers.map((ans, idx) => ({ text: ans, isCorrect: idx === q.correct }));
      shuffleArray(answers);

      progressContainer.style.display = "block";
      progressContainer.textContent = "Question " + (currentQuestion + 1) + " / " + questions.length;

      var html = '<div class="question"><p><strong>' + q.text + '</strong></p>';

      answers.forEach(a => {
        html += '<button onclick="checkAnswer(' + a.isCorrect + ')">' + a.text + '</button>';
      });

      html += '<p id="feedback"></p></div>';

      quizContainer.innerHTML = html;

      startTime = performance.now();
    }

    /* ---------------------------
       TRAITEMENT DE LA RÉPONSE
       --------------------------- */
    function checkAnswer(isCorrect) {
      var endTime = performance.now();
      var responseTime = Math.round((endTime - startTime) / 1000);

      var feedback = document.getElementById("feedback");

      feedback.innerHTML =
        (isCorrect ? "✅ Bonne réponse !" : "❌ Mauvaise réponse.") +
        "<br><span style='opacity:0.7;'>⏱ Temps : <strong>" + responseTime + " s</strong></span>" +
        "<br><br><strong>Correction :</strong> " + corrections[currentQuestion];

      if (isCorrect) score++;

      nextBtn.style.display = "block";
    }

    /* ---------------------------
       BOUTON QUESTION SUIVANTE
       --------------------------- */
    nextBtn.addEventListener("click", function () {
      currentQuestion++;
      showQuestion();
    });

    /* ---------------------------
       DÉMARRAGE DU QUIZ
       --------------------------- */
    startBtn.addEventListener("click", function () {
      startBtn.style.display = "none";
      showQuestion();
    });

  </script>
</body>
</html>
