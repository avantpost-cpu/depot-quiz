<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mosaïque Angie – Coverflow</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#fff;
  font-family:Arial, Helvetica, sans-serif;
  overflow:hidden;
}

/* ===================== */
/* COVERFLOW */
/* ===================== */
.coverflow{
  display:flex;
  align-items:center;
  gap:120px;
  width:100vw;
  height:100vh;
  overflow-x:auto;
  overflow-y:hidden;
  scroll-behavior:smooth;
  -webkit-overflow-scrolling:touch;
  perspective:1600px;
  padding:0 15vw;
}
.coverflow::-webkit-scrollbar{display:none}
.coverflow{scrollbar-width:none}

.slide{
  flex:0 0 auto;
  width:80vw;
  max-width:1200px;
  display:flex;
  justify-content:center;
  align-items:center;
  transform:rotateY(35deg);
  opacity:.35;
  transition:transform .6s ease, opacity .6s ease;
}
.slide.active{transform:rotateY(0deg);opacity:1}
.slide.left{transform:rotateY(45deg)}
.slide.right{transform:rotateY(-45deg)}

.slide img{
  width:100%;
  height:auto;
  display:block;
}

/* NAV */
.nav{
  position:fixed;
  bottom:24px;
  left:50%;
  transform:translateX(-50%);
  display:flex;
  gap:16px;
  z-index:20;
}
.nav button{
  width:56px;
  height:56px;
  border-radius:50%;
  border:none;
  font-size:28px;
  background:#104c64;
  color:#fff;
  cursor:pointer;
}

/* ===================== */
/* MOSAÏQUE */
/* ===================== */
.wrapper{
  position:relative;
  transform:scale(0.35);
  transform-origin:top center;
}

.mosaic{
  display:grid;
  grid-template-columns:var(--w1) var(--w2) var(--w3);
  grid-template-rows:var(--h1) var(--h2) var(--h3);
  width:calc(var(--w1) + var(--w2) + var(--w3));
  height:calc(var(--h1) + var(--h2) + var(--h3));
  line-height:0;
}

.mosaic img{
  width:100%;
  height:100%;
  display:block;
  object-fit:fill;
}

#A1{grid-column:1;grid-row:1/span 3}
#A2{grid-column:2;grid-row:1}
#C {grid-column:2;grid-row:2}
#A3{grid-column:2;grid-row:3}
#B {grid-column:3;grid-row:1}
#D {grid-column:3;grid-row:2}
#E {grid-column:3;grid-row:3}

/* OVERLAY */
#overlayD{
  position:absolute;
  display:none;
  background:#104c64;
  padding:22px 24px;
}
#overlayD p{
  color:#fff;
  font-size:36px;
  line-height:1.55;
  text-align:justify;
}
</style>
</head>

<body>

<div class="coverflow" id="coverflow">



<!-- AUTRES PAGES -->
<section class="slide"><img src="https://avantpost-cpu.github.io/depot-quiz/angie/page0.jpg"></section>
<section class="slide"><img src="https://avantpost-cpu.github.io/depot-quiz/angie/page1.jpg"></section>
<section class="slide"><img src="https://avantpost-cpu.github.io/depot-quiz/angie/page2.jpg"></section>
<section class="slide"><img src="https://avantpost-cpu.github.io/depot-quiz/angie/page3.jpg"></section>

</div>

<div class="nav">
  <button id="prev">‹</button>
  <button id="next">›</button>
</div>

<script>
/* ===================== */
/* MOSAÏQUE */
/* ===================== */
const mosaic=document.getElementById("mosaic");
const overlay=document.getElementById("overlayD");

function applyGrid(){
  mosaic.style.setProperty("--w1",A1.naturalWidth+"px");
  mosaic.style.setProperty("--w2",A2.naturalWidth+"px");
  mosaic.style.setProperty("--w3",B.naturalWidth+"px");
  mosaic.style.setProperty("--h1",A2.naturalHeight+"px");
  mosaic.style.setProperty("--h2",C.naturalHeight+"px");
  mosaic.style.setProperty("--h3",A3.naturalHeight+"px");
}

function placeOverlay(){
  overlay.style.left=D.offsetLeft+"px";
  overlay.style.top=D.offsetTop+"px";
  overlay.style.width=D.clientWidth+"px";
  overlay.style.height=D.clientHeight+"px";
  overlay.style.display="block";
}

window.onload=()=>{
  applyGrid();
  requestAnimationFrame(placeOverlay);
};

/* ===================== */
/* COVERFLOW */
/* ===================== */
const coverflow=document.getElementById("coverflow");
const slides=[...document.querySelectorAll(".slide")];
let index=0;

function centerSlide(i){
  const s=slides[i];
  const x=s.offsetLeft-(coverflow.clientWidth-s.clientWidth)/2;
  coverflow.scrollTo({left:x,behavior:"smooth"});
}

function updateSlides(){
  slides.forEach((s,i)=>{
    s.classList.remove("active","left","right");
    if(i===index) s.classList.add("active");
    else if(i<index) s.classList.add("left");
    else s.classList.add("right");
  });
  centerSlide(index);
}

document.getElementById("prev").onclick=()=>{if(index>0){index--;updateSlides();}};
document.getElementById("next").onclick=()=>{if(index<slides.length-1){index++;updateSlides();}};

requestAnimationFrame(updateSlides);
</script>

</body>
</html>
