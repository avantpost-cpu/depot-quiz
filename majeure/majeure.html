<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Majeure</title>

<style>
/* ---------------------------------------------------
   RESET
--------------------------------------------------- */
html, body {
  margin: 0;
  padding: 0;
  background: #fff;
  font-family: Arial, sans-serif;
}

/* ---------------------------------------------------
   CONTENEUR GLOBAL
--------------------------------------------------- */
.majeure-wrapper {
  width: 100%;
  max-width: 900px;     /* limite confortable */
  margin: 0 auto;
  padding: 10px 0;
}

/* ---------------------------------------------------
   ZONE FOND 9/16 (AUCUN 100vh)
--------------------------------------------------- */
.fond {
  position: relative;
  width: 100%;
  aspect-ratio: 9 / 16;
  background-image: url("https://avantpost-cpu.github.io/depot-quiz/majeure/fondadulte.png");
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  overflow: hidden;
}

/* ---------------------------------------------------
   BARRE + CURSEUR VOLUME  —  FIXES ET NON DÉFORMÉS
--------------------------------------------------- */
.volume-container {
  position: absolute;
  width: 28%;     /* IDENTIQUE à ton ancienne version */
  left: 37%;      /* centré PROPREMENT */
  top: 29%;       /* ajusté pour enlever le décalage */
  height: 42px;
  pointer-events: none;
}

.volume-bar {
  position: absolute;
  inset: 0;
  background-image: url("https://avantpost-cpu.github.io/depot-quiz/mineure/son.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: left center;
}

.volume-cursor {
  position: absolute;
  top: 50%;
  left: 0%;
  width: 9%;
  height: 42px;
  background-image: url("https://avantpost-cpu.github.io/depot-quiz/mineure/volume.png");
  background-size: contain;
  background-repeat: no-repeat;
  transform: translateY(-50%);
  cursor: pointer;
  pointer-events: auto;
  transition: transform .2s ease;
}

.volume-cursor:active {
  transform: translateY(-50%) scale(1.2);
}

/* ---------------------------------------------------
   ICÔNES 1 → 5  EN DIV (PAS DE <img>)
--------------------------------------------------- */
.icone {
  position: absolute;
  left: 18%;
  width: 25%;
  aspect-ratio: 4 / 1; /* ratio approximatif stable */
  background-size: contain;
  background-repeat: no-repeat;
  background-position: left center;
  opacity: .40;
  cursor: pointer;
  transition:
    transform .6s ease,
    filter .6s ease,
    opacity .4s ease;
}

.icone:hover {
  transform: scale(1.8) rotate(-3deg);
  filter: brightness(1.12);
  opacity: 1;
}

/* POSITIONNEMENT EXACT DES ICONES */
.icone-1 { background-image: url("https://avantpost-cpu.github.io/depot-quiz/majeure/1.png"); top: 38%; }
.icone-2 { background-image: url("https://avantpost-cpu.github.io/depot-quiz/majeure/2.png"); top: 45%; }
.icone-3 { background-image: url("https://avantpost-cpu.github.io/depot-quiz/majeure/3.png"); top: 53%; }
.icone-4 { background-image: url("https://avantpost-cpu.github.io/depot-quiz/majeure/4.png"); top: 64%; }
.icone-5 { background-image: url("https://avantpost-cpu.github.io/depot-quiz/majeure/5.png"); top: 72%; }

/* ---------------------------------------------------
   RESPONSIVE
--------------------------------------------------- */
@media (max-width: 768px) {
  .majeure-wrapper {
    padding: 0;
  }

  .icone {
    width: 30%;
  }

  .volume-container {
    width: 90%;
    left: 5%;
    top: 12%;
  }

  .volume-cursor {
    width: 12%;
  }
}
</style>
</head>

<body>

<div class="majeure-wrapper">

  <div class="fond">

    <!-- BARRE + CURSEUR -->
    <div class="volume-container">
      <div class="volume-bar"></div>
      <div class="volume-cursor"></div>
    </div>

    <!-- ICONES 1 → 5 -->
    <div class="icone icone-1" data-son="s1.wav"></div>
    <div class="icone icone-2" data-son="s2.wav"></div>
    <div class="icone icone-3" data-son="s3.wav"></div>
    <div class="icone icone-4" data-son="s4.wav"></div>
    <div class="icone icone-5" data-son="s5.wav"></div>

  </div>

</div>


<script>
/* ---------------------------------------------------
   CURSEUR DE VOLUME — LIMITES 0% → 80%
--------------------------------------------------- */

let globalVolume = 0.5;

const cursor = document.querySelector(".volume-cursor");
const bar = document.querySelector(".volume-bar");

let dragging = false;

/* limites relatives */
const minX = 0.00;
const maxX = 0.80;

function moveCursor(clientX) {
  const rect = bar.getBoundingClientRect();
  let x = (clientX - rect.left) / rect.width;

  x = Math.max(minX, Math.min(x, maxX));

  cursor.style.left = (x * 100) + "%";

  globalVolume = (x - minX) / (maxX - minX);
}

cursor.addEventListener("mousedown", e => {
  dragging = true;
  e.preventDefault();
});
document.addEventListener("mouseup", () => dragging = false);
document.addEventListener("mousemove", e => {
  if (dragging) moveCursor(e.clientX);
});

/* MOBILE */
cursor.addEventListener("touchstart", e => {
  dragging = true;
  e.preventDefault();
});
document.addEventListener("touchend", () => dragging = false);
document.addEventListener("touchmove", e => {
  if (dragging) moveCursor(e.touches[0].clientX);
});

/* ---------------------------------------------------
   SONS AU CLIC
--------------------------------------------------- */
document.querySelectorAll('.icone').forEach(el => {
  const fichier = el.getAttribute('data-son');
  const audio = new Audio("https://avantpost-cpu.github.io/depot-quiz/majeure/" + fichier);

  let playing = false;

  el.addEventListener("click", () => {
    if (!playing) {
      playing = true;
      audio.currentTime = 0;
      audio.volume = globalVolume;
      audio.play();
      audio.onended = () => playing = false;
    }
  });
});
</script>

</body>
</html>
    
  </body>
  
</html>
