<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Majeure</title>
</head>

<body>

<div class="scene-adulte">

  <div class="zone-fond">

    <!-- ðŸ”Š BARRE SON + CURSEUR -->
    <div class="volume-container">
      <img src="https://avantpost-cpu.github.io/depot-quiz/mineure/son.png" class="volume-bar">
      <img src="https://avantpost-cpu.github.io/depot-quiz/mineure/volume.png" class="volume-cursor">
    </div>

    <!-- ðŸ”ˆ ICÃ”NES 1 â†’ 5 -->
    <img class="icone" data-son="s1.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/1.png">
    <img class="icone" data-son="s2.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/2.png">
    <img class="icone" data-son="s3.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/3.png">
    <img class="icone" data-son="s4.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/4.png">
    <img class="icone" data-son="s5.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/5.png">

  </div>

</div>

<style>
/* ---------------------------------------------------
   SCÃˆNE PRINCIPALE
--------------------------------------------------- */
.scene-adulte {
  position: relative;
  width: 100%;
  height: 100vh;
  background: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* ---------------------------------------------------
   ZONE FOND 9/16
--------------------------------------------------- */
.zone-fond {
  position: relative;
  width: 44%;
  aspect-ratio: 9 / 16;
  background: url("https://avantpost-cpu.github.io/depot-quiz/majeure/fondadulte.png")
              center center / contain no-repeat;
}

/* ---------------------------------------------------
   CORRECTION DIGIFORMA
   EmpÃªche l'Ã©tirement des images son + curseur
--------------------------------------------------- */
.volume-bar,
.volume-cursor {
  width: auto !important;
  height: auto !important;
  max-width: none !important;
  max-height: none !important;
}

/* ---------------------------------------------------
   BARRE + CURSEUR DE VOLUME
--------------------------------------------------- */
.volume-container {
  position: absolute;
  width: 24%;        /* mÃªme pour mineure */
  left: 37%;         /* alignement parfait */
  top: 30%;
  pointer-events: none;
}

.volume-bar {
  width: 100% !important;  /* garanti correct */
}

.volume-cursor {
  position: absolute;
  top: 50%;
  left: 0%;
  width: 8% !important;
  transform: translateY(-50%);
  cursor: pointer;
  pointer-events: auto;
  transition: transform .2s ease;
}

.volume-cursor:active {
  transform: translateY(-50%) scale(1.2);
}

/* ---------------------------------------------------
   ICÃ”NES
--------------------------------------------------- */
.icone {
  position: absolute;
  left: 18%;
  width: 25%;
  opacity: 0.40;
  height: auto;
  cursor: pointer;
  transition:
    transform .60s ease,
    filter .60s ease,
    opacity .40s ease;
}

.icone:hover {
  transform: scale(1.8) rotate(-3deg);
  filter: brightness(1.12);
  opacity: 1;
  z-index: 20;
}

/* Positions exactes */
.icone:nth-child(2) { top: 38%; }
.icone:nth-child(3) { top: 45%; }
.icone:nth-child(4) { top: 53%; }
.icone:nth-child(5) { top: 64%; }
.icone:nth-child(6) { top: 72%; }

@media (max-width: 768px) {
  .zone-fond { width: 90%; }
  .icone { width: 30%; }
  .volume-container { width: 90%; left: 5%; top: 12%; }
  .volume-cursor { width: 12% !important; }
}
</style>

<script>
/* ---------------------------------------------------
   CURSEUR DE VOLUME
--------------------------------------------------- */
let globalVolume = 0.5;

const cursor = document.querySelector('.volume-cursor');
const bar = document.querySelector('.volume-bar');
let dragging = false;

/* Limitation du dÃ©placement â†’ max 80% */
const minX = 0.00;
const maxX = 0.80;

/* SOURIS */
cursor.addEventListener('mousedown', e => {
  dragging = true;
  e.preventDefault();
});
document.addEventListener('mouseup', () => dragging = false);

document.addEventListener('mousemove', e => {
  if (!dragging) return;

  const rect = bar.getBoundingClientRect();
  let x = (e.clientX - rect.left) / rect.width;

  x = Math.min(Math.max(x, minX), maxX);

  cursor.style.left = (x * 100) + "%";

  globalVolume = (x - minX) / (maxX - minX);
});

/* MOBILE */
cursor.addEventListener('touchstart', e => {
  dragging = true;
  e.preventDefault();
});
document.addEventListener('touchend', () => dragging = false);

document.addEventListener('touchmove', e => {
  if (!dragging) return;

  const touch = e.touches[0];
  const rect = bar.getBoundingClientRect();
  let x = (touch.clientX - rect.left) / rect.width;

  x = Math.min(Math.max(x, minX), maxX);

  cursor.style.left = (x * 100) + "%";

  globalVolume = (x - minX) / (maxX - minX);
});

/* ---------------------------------------------------
   LECTURE DES SONS AU CLIC (et non plus au hover)
--------------------------------------------------- */
document.querySelectorAll('.icone').forEach(img => {
  const fichier = img.getAttribute('data-son');
  const audio = new Audio("https://avantpost-cpu.github.io/depot-quiz/majeure/" + fichier);

  let playing = false;

  img.addEventListener('click', () => {
    if (!playing) {
      playing = true;
      audio.currentTime = 0;
      audio.volume = globalVolume;
      audio.play();
      audio.onended = () => playing = false;
    }
  });

  img.addEventListener('touchstart', () => {
    audio.currentTime = 0;
    audio.volume = globalVolume;
    audio.play();
  });
});
</script>

</body>
</html>
    
  </body>
  
</html>
