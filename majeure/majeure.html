<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="fr">

<head>
<meta charset="UTF-8">
<title>Majeure</title>

<style>

/* ------------------------------------------
   SCÈNE PRINCIPALE
------------------------------------------- */
.scene-adulte {
  position: relative;
  width: 100%;
  height: 100vh;
  background: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

/* ------------------------------------------
   ZONE FOND
------------------------------------------- */
.zone-fond {
  position: relative;
  width: 44%;
  aspect-ratio: 9 / 16;
  background: url("https://avantpost-cpu.github.io/depot-quiz/majeure/fondadulte.png")
              center / contain no-repeat;
}

/* ------------------------------------------
   BARRE + CURSEUR : en div (ANTI-DIGIFORMA)
------------------------------------------- */
.volume-container {
  position: absolute;
  width: 24%;
  left: 37%;
  top: 30%;
  height: 40px;
}

.volume-bar {
  position: absolute;
  left: 0;
  top: 0;
  width: 100%;
  height: 40px;

  background-image: url("https://avantpost-cpu.github.io/depot-quiz/mineure/son.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: left center;
}

.volume-cursor {
  position: absolute;
  top: 50%;
  left: 0%;
  width: 10%;
  height: 40px;

  background-image: url("https://avantpost-cpu.github.io/depot-quiz/mineure/volume.png");
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;

  transform: translateY(-50%);
  cursor: pointer;
  transition: transform .2s ease;
}

.volume-cursor:active {
  transform: translateY(-50%) scale(1.2);
}

/* ------------------------------------------
   ICÔNES
------------------------------------------- */
.icone {
  position: absolute;
  left: 18%;
  width: 25%;
  opacity: 0.40;
  cursor: pointer;
  transition: transform .6s ease,
              filter .6s ease,
              opacity .4s ease;
}

.icone:hover {
  transform: scale(1.8) rotate(-3deg);
  filter: brightness(1.12);
  opacity: 1;
}

.icone:nth-of-type(1) { top: 38%; }
.icone:nth-of-type(2) { top: 45%; }
.icone:nth-of-type(3) { top: 53%; }
.icone:nth-of-type(4) { top: 64%; }
.icone:nth-of-type(5) { top: 72%; }

/* ------------------------------------------
   RESPONSIVE
------------------------------------------- */
@media (max-width:768px){
  .zone-fond { width:90%; }
  .icone { width:30%; }

  .volume-container{
    width: 90%;
    left: 5%;
    top: 12%;
  }

  .volume-cursor{
    width: 12%;
  }
}

</style>
</head>


<body>

<div class="scene-adulte">

  <div class="zone-fond">

    <!-- BARRE SON FOND + CURSEUR -->
    <div class="volume-container">
      <div class="volume-bar"></div>
      <div class="volume-cursor"></div>
    </div>

    <!-- ICONES -->
    <img class="icone" data-son="s1.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/1.png">
    <img class="icone" data-son="s2.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/2.png">
    <img class="icone" data-son="s3.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/3.png">
    <img class="icone" data-son="s4.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/4.png">
    <img class="icone" data-son="s5.wav" src="https://avantpost-cpu.github.io/depot-quiz/majeure/5.png">

  </div>

</div>


<script>

/* ---------------------------------------------------
   CURSEUR DE VOLUME
--------------------------------------------------- */
let globalVolume = 0.5;

const cursor = document.querySelector('.volume-cursor');
const bar = document.querySelector('.volume-bar');

let dragging = false;
const minX = 0.00;
const maxX = 0.80;

/* MOUSE */
cursor.addEventListener('mousedown', e => {
  dragging = true;
  e.preventDefault();
});
document.addEventListener('mouseup', () => dragging = false);

document.addEventListener('mousemove', e => {
  if (!dragging) return;
  
  const rect = bar.getBoundingClientRect();
  let x = (e.clientX - rect.left) / rect.width;

  x = Math.min(Math.max(x, minX), maxX);
  cursor.style.left = (x * 100) + "%";

  globalVolume = (x - minX) / (maxX - minX);
});

/* TOUCH */
cursor.addEventListener('touchstart', e => {
  dragging = true;
  e.preventDefault();
});
document.addEventListener('touchend', () => dragging = false);

document.addEventListener('touchmove', e => {
  if (!dragging) return;

  const touch = e.touches[0];
  const rect = bar.getBoundingClientRect();
  let x = (touch.clientX - rect.left) / rect.width;

  x = Math.min(Math.max(x, minX), maxX);
  cursor.style.left = (x * 100) + "%";

  globalVolume = (x - minX) / (maxX - minX);
});

/* ---------------------------------------------------
   SONS AU CLIC
--------------------------------------------------- */
document.querySelectorAll('.icone').forEach(img => {
  const src = img.getAttribute('data-son');
  const audio = new Audio("https://avantpost-cpu.github.io/depot-quiz/majeure/" + src);

  let playing = false;

  img.addEventListener('click', () => {
    if (!playing) {
      playing = true;
      audio.currentTime = 0;
      audio.volume = globalVolume;
      audio.play();
      audio.onended = () => playing = false;
    }
  });
});

</script>

</body>
</html>
    
  </body>
  
</html>
