<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>miroir_intme ‚Äì 20 situations</title>
<style>
  :root{
    /* Couleurs (douces mais franches) */
    --ink:#0f2230; --muted:#5a7387; --blue:#6aa6d8;
    --green:#80D4A0; /* s√©curit√© */
    --yellow:#FFD56A; /* vigilance */
    --red:#F78E7B; /* alerte corail humain */
    --card:#ffffff; --shadow:0 8px 30px rgba(15,34,48,.10); --radius:18px;
    /* D√©grad√© color√© superpos√© √† la mosa√Øque */
    --bgTop:#ffffff; --bgBottom:#ffffff; --overlay:82%;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: Inter, Roboto, system-ui, -apple-system, Segoe UI, Helvetica, Arial; color:var(--ink);
    min-height:100svh; display:flex; align-items:center; justify-content:center; padding:20px;
    transition:background 600ms ease;
    /* Mosa√Øque + d√©grad√© pilot√© par JS via CSS vars */
    background-image: linear-gradient(180deg,
      color-mix(in srgb, var(--bgTop) var(--overlay), transparent),
      color-mix(in srgb, var(--bgBottom) var(--overlay), transparent) 55%),
      url('https://avantpost-cpu.github.io/depot-quiz/consequences/livre/fond.jpg');
    background-repeat: repeat;
    background-size: auto;
    background-attachment: fixed;
  }
  .app{ width:min(980px,100%); }

  /* Header image + sous-titre */
  .header{ display:block; text-align:center; margin:8px 0 14px; }
  .header-img{ display:block; margin:0 auto 8px; max-height:160px; width:auto; border-radius:10px; box-shadow: var(--shadow); }
  .subtitle{ text-align:center; color:#6b7f92; font-style:italic; margin:0 0 10px; }

  .card{ background:rgba(255,255,255,0.92); border-radius:var(--radius); box-shadow: var(--shadow); overflow:hidden; }
  .hero{ padding:24px; display:grid; grid-template-columns:1fr; gap:16px; }
  .hero p{ margin:0; color:var(--muted); text-align:center; }
  .cta{ display:flex; gap:12px; margin-top:6px; justify-content:center; flex-wrap:wrap; }
  .btn{ appearance:none; border:0; background:#6aa6d8; color:white; padding:12px 16px; border-radius:14px; font-weight:700; cursor:pointer; box-shadow:0 8px 16px rgba(106,166,216,.25); transition:.2s transform,.2s box-shadow,.2s opacity,.2s filter; }
  .btn:hover{ transform: translateY(-1px); box-shadow:0 10px 20px rgba(106,166,216,.32); }
  .btn.secondary{ background:#edf5ff; color:#2b5ea8; box-shadow:none; }
  .btn[disabled]{ opacity:.6; filter:grayscale(.25); cursor:not-allowed; }

  .stage{ padding:18px; display:none; }
  .situation{ display:grid; gap:12px; }
  .s-head{ display:flex; align-items:flex-start; gap:12px; }
  .badge{ background:#eef7ff; color:#2b5ea8; font-weight:700; padding:6px 10px; border-radius:10px; }
  .s-title{ margin:2px 0 0; font-size:clamp(18px,2.4vw,22px); }
  .s-text{ color:var(--muted); line-height:1.65; white-space:pre-wrap; }

  /* Jauge color√©e int√©gr√©e dans la carte */
  .inline-progress{ display:flex; align-items:center; gap:12px; padding:6px 0 4px; }
  .ip-label{ font-size:12px; color:#5b6f86; font-weight:700; }
  .bar{ height:10px; background:#eff4f8; border-radius:999px; overflow:hidden; flex:1; }
  .bar > i{ display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--green), var(--yellow), var(--red)); transition: width .3s ease; }
  .counter{ font-weight:700; font-variant-numeric: tabular-nums; color:#3c5666; }

  .choices{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
  @media (max-width:560px){ .choices{ grid-template-columns:1fr; } }
  .choice{ border:2px solid transparent; border-radius:16px; padding:16px; background:#f9fbfe; cursor:pointer; display:flex; align-items:flex-start; gap:12px; text-align:left; box-shadow: var(--shadow); transition:.2s transform; }
  .choice:hover{ transform: translateY(-2px); }
  .choice i{ font-size:22px; line-height:1; }
  .choice .label{ display:block; font-weight:800; font-size:22px; line-height:1.15; }
  .choice[data-val="2"] .label{ color:#1a8a56; }
  .choice[data-val="1"] .label{ color:#b58500; }
  .choice[data-val="0"] .label{ color:#c25445; }
  .choice small{ display:block; font-weight:500; color:#5f7287; margin-top:6px; font-size:13px; }
  .choice.active{ outline:3px solid rgba(106,166,216,.55); background:#fff; }

  .feedback{ margin-top:6px; padding:12px 14px; border-radius:14px; background:#f6f9fc; display:none; }
  .feedback.show{ display:block; }

  .nav{ display:none; justify-content:space-between; align-items:center; padding:14px 18px; gap:10px; }
  .need-answer{ display:none; color:#7d241f; background:#fff2f1; border:1px solid #ffd7d3; padding:8px 10px; border-radius:10px; font-size:13px; font-weight:700; }
  .shake{ animation:shake .35s ease; }
  @keyframes shake{ 10%{transform:translateX(-2px)} 30%{transform:translateX(2px)} 50%{transform:translateX(-2px)} 70%{transform:translateX(2px)} 100%{transform:none} }

  .footer-note{ margin-top:4px; color:#6b7f92; font-size:12px; text-align:center; }
  .endcard{ display:none; margin-top:16px; }
</style>
</head>
<body>
  <div class="app">
    <div class="header">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/miroir.jpg" alt="Dessin d‚Äôun enfant devant un miroir" class="header-img" />
      <p class="subtitle">Un moment pour te d√©couvrir vraiment.</p>
    </div>

    <section class="card hero" id="hero">
      <div>
        <p>Lis chaque situation. Choisis ce qui te ressemble le plus. La <strong>couleur de la page</strong> et la <strong>jauge</strong> √©voluent selon tes r√©ponses. √Ä la fin, une synth√®se bienveillante t‚Äôaccompagne.</p>
        <div class="cta">
          <button class="btn" id="startBtn">Commencer</button>
          <button class="btn secondary" id="resumeBtn">Reprendre</button>
        </div>
        <p class="footer-note">Tes r√©ponses restent sur ton appareil (localStorage). Tu peux les effacer ensuite.</p>
      </div>
    </section>

    <section class="card stage" id="stage">
      <div class="situation">
        <div class="s-head"><span class="badge" id="sid">#1</span><h2 class="s-title" id="sTitle"></h2></div>
        <p class="s-text" id="sText"></p>

        <div class="inline-progress" id="inlineProgress">
          <span class="ip-label">Ta progression</span>
          <div class="bar" aria-hidden="true"><i id="barFill"></i></div>
          <div class="counter" id="counter">1 / 20</div>
        </div>

        <div class="choices" role="group" aria-label="Choisis ton ressenti">
          <button class="choice" data-val="2"><i>üü¢</i><div><span class="label">Oui</span><small>Je me reconnais vraiment dans cette situation.</small></div></button>
          <button class="choice" data-val="1"><i>üü°</i><div><span class="label">Parfois</span><small>C‚Äôest vrai √† certains moments, mais pas toujours.</small></div></button>
          <button class="choice" data-val="0"><i>üî¥</i><div><span class="label">Non</span><small>Ce n‚Äôest pas ce que je vis.</small></div></button>
        </div>

        <div class="feedback" id="feedback"></div>
        <div class="need-answer" id="needAnswer">üëâ Choisis ta r√©ponse pour continuer</div>
      </div>
    </section>

    <div class="nav" id="nav">
      <button class="btn secondary" id="prevBtn">‚Üê Pr√©c√©dent</button>
      <div class="spacer"></div>
      <button class="btn" id="nextBtn" disabled>Suivant ‚Üí</button>
    </div>

    <section class="card endcard" id="endcard">
      <div style="padding:16px 18px;">
        <h2>Merci ‚ú®</h2>
        <p class="s-text">Merci d‚Äôavoir pris ce temps pour toi. Si certaines r√©ponses t‚Äôont fait r√©fl√©chir, tu peux en parler √† une <strong>personne de confiance</strong> (parent, autre √©ducateur¬∑rice, professeur¬∑e, m√©decin scolaire‚Ä¶), ou √† un¬∑e <strong>r√©f√©rent¬∑e int√©grit√©</strong> dans ton club. En cas de danger imm√©diat : <strong>112</strong>.</p>
      </div>
    </section>
  </div>

<script>
// --- Textes riches + question finale en gras ‚Äî situations 1 √† 20
const situations = [
  { id:1, title:"Je me sens encourag√©¬∑e dans mes efforts",
    text:`√Ä l‚Äôentra√Ænement, on reconna√Æt ce que tu fais. Ton entra√Æneur¬∑e t‚Äôexplique avec calme, m√™me quand tu te trompes, et t‚Äôaide √† comprendre pour progresser. On ne te crie pas dessus ni ne te rabaisse. Dans le groupe, on travaille s√©rieusement, on rigole aussi, et tu sens que tu peux apprendre √† ton rythme et √™tre fier¬∑e de tes efforts.\n\n**Est-ce que tu te sens encourag√©¬∑e de cette mani√®re ?**` },
  { id:2, title:"Les r√®gles, les personnes et l‚Äôenvironnement sont respect√©s",
    text:`Tu connais et tu appliques les r√®gles du sport : tu respectes l‚Äôarbitrage, tes camarades, les √©ducateurs et les b√©n√©voles. Tu fais attention aux lieux (vestiaires, gymnase, transports) et √† la nature quand tu pratiques dehors, ainsi qu‚Äôaux animaux partenaires si c‚Äôest le cas. Quand chacun¬∑e fait sa part, cela cr√©e un cadre s√ªr et juste pour s‚Äôentra√Æner.\n\n**Est-ce que ton environnement sportif est respectueux et bienveillant ?**` },
  { id:3, title:"Tu peux demander des explications librement",
    text:`Si une consigne, un geste ou un r√®glement n‚Äôest pas clair, tu peux demander qu‚Äôon t‚Äôexplique sans √™tre jug√©¬∑e. Quand une parole te blesse (sexiste, homophobe ou discriminatoire), tu as le droit d‚Äôen parler et d‚Äô√™tre √©cout√©¬∑e. Poser des questions et dire ce qui te g√™ne fait partie du respect et de la progression.\n\n**Est-ce que tu peux parler librement quand quelque chose te g√™ne ?**` },
  { id:4, title:"Tu peux demander les adaptations dont tu as besoin",
    text:`Tu peux dire ce qui t‚Äôaide √† pratiquer dans de bonnes conditions : un lieu accessible, des informations expliqu√©es autrement, des am√©nagements li√©s √† ta sant√© ou √† un handicap. On prend tes besoins au s√©rieux et on cherche des solutions pour que tu participes pleinement et sereinement.\n\n**Est-ce que tes besoins sont entendus et pris en compte ?**` },
  { id:5, title:"Ton corps t‚Äôappartient : on demande ton accord pour te toucher",
    text:`Pour un geste technique, une parade ou une correction, on t‚Äôexplique ce qu‚Äôon va faire et on te demande ton accord. Tu peux dire oui, non, ou proposer une autre mani√®re de t‚Äôaider. Tu as le droit d‚Äôapprendre sans contact non d√©sir√©, et de rappeler que ton corps t‚Äôappartient.\n\n**Est‚Äëce qu‚Äôon te demande ton accord avant tout contact ?**` },
  { id:6, title:"Ton intimit√© est respect√©e (vestiaires, douche, aide)",
    text:`Tu choisis comment te changer et qui peut t‚Äôaider. Si tu as besoin d‚Äôune aide, elle se fait avec ton accord et dans le respect de ta pudeur. Personne ne doit entrer dans ton espace sans pr√©venir ni s‚Äôimposer quand tu n‚Äôes pas √† l‚Äôaise. Tu peux le dire et demander un cadre plus protecteur.\n\n**Est‚Äëce que ton intimit√© est respect√©e, y compris quand on t‚Äôaide ?**` },
  { id:7, title:"Ton identit√© de genre et ton orientation sont respect√©es",
    text:`Tu peux vivre ton identit√© sans moqueries ni exclusions : pr√©nom et pronoms respect√©s, acc√®s √† des vestiaires adapt√©s, cadre bienveillant avec le groupe et l‚Äôencadrement. Tu as le droit d‚Äô√™tre toi‚Äëm√™me et de pratiquer en s√©curit√©, sans pression ni honte.\n\n**Est‚Äëce que ton identit√© est respect√©e et prise en compte dans ta pratique ?**` },
  { id:8, title:"Paroles, gestes, regards qui te mettent mal √† l‚Äôaise",
    text:`Parfois tu ressens une g√™ne sans savoir pourquoi : ambiance lourde, regards insistants, surnoms que tu n‚Äôaimes pas. Il peut y avoir des paroles m√©chantes, moqueuses, sexistes ou homophobes, ou au contraire trop centr√©es sur ton corps. Tu as le droit de dire stop et d‚Äôen parler √† quelqu‚Äôun de confiance.\n\n**Est‚Äëce que tu vis parfois ce malaise dans ton environnement sportif ?**` },
  { id:9, title:"On t‚Äôoblige √† √™tre en sous‚Äëv√™tements √† la vue des autres",
    text:`Tu peux pr√©f√©rer te changer √† l‚Äôabri des regards et c‚Äôest ton droit. M√™me si une pes√©e ou un soin est n√©cessaire, cela doit se faire dans le respect de ta pudeur, par des professionnel¬∑les, et sans public.\n\n**T‚Äôest‚Äëil d√©j√† arriv√© qu‚Äôon t‚Äôimpose d‚Äô√™tre d√©v√™tu¬∑e devant d‚Äôautres alors que tu n‚Äô√©tais pas √† l‚Äôaise ?**` },
  { id:10, title:"Entr√©es dans les vestiaires sans pr√©venir",
    text:`Les vestiaires sont des lieux d‚Äôintimit√©. Si des personnes entrent sans pr√©venir pendant que tu te changes ou te douches, tu peux te sentir expos√©¬∑e. Il peut y avoir de bonnes raisons, mais le respect de ta pudeur prime.\n\n**Est‚Äëce que des entr√©es sans pr√©venir t‚Äôont d√©j√† mis mal √† l‚Äôaise ?**` },
  { id:11, title:"On t‚Äôaide √† t‚Äôhabiller sans te demander ton accord",
    text:`Parfois quelqu‚Äôun t‚Äôaide √† te changer sans te demander si tu es d‚Äôaccord. Tu peux refuser, choisir qui t‚Äôaide et comment, et demander que cela se fasse dans le respect de ta pudeur et de ton rythme.\n\n**Est‚Äëce qu‚Äôon t‚Äôaide parfois sans te demander clairement ton accord ?**` },
  { id:12, title:"Pressions et messages intrusifs sur les r√©seaux",
    text:`En ligne, tu peux recevoir des messages insistants, intrusifs ou √† caract√®re intime. M√™me si cela vient d‚Äôun¬∑e encadrant¬∑e, d‚Äôun¬∑e camarade ou d‚Äôun sponsor, tu as le droit de poser des limites et d‚Äôen parler si tu n‚Äôes pas respect√©¬∑e.\n\n**Est‚Äëce que tu vis parfois des pressions ou messages intrusifs sur les r√©seaux ?**` },
  { id:13, title:"On te demande de rester seul¬∑e apr√®s l‚Äôentra√Ænement",
    text:`Quelqu‚Äôun te demande de rester une fois que tout le monde est parti et cela te met mal √† l‚Äôaise. Tu as le droit de dire non. Si tu as peur ou te sens oblig√©¬∑e, parle‚Äëen √† une personne de confiance.\n\n**T‚Äôest‚Äëil d√©j√† arriv√© de te sentir oblig√©¬∑e de rester seul¬∑e avec quelqu‚Äôun ?**` },
  { id:14, title:"Isolement, harc√®lement, bizutage",
    text:`Tu es mis¬∑e √† l‚Äô√©cart, moqu√©¬∑e, menac√©¬∑e, ou on te fait faire des choses humiliantes ‚Äúpour rire‚Äù. Le harc√®lement et le bizutage ne sont jamais acceptables.\n\n**As‚Äëtu d√©j√† √©t√© isol√©¬∑e ou harcel√©¬∑e dans ton cadre sportif ?**` },
  { id:15, title:"Haine en ligne, chantage, harc√®lement num√©rique",
    text:`Des messages haineux, humiliants ou √† caract√®re sexuel peuvent t‚Äôatteindre en ligne. On peut aussi te mettre la pression pour des performances, des vues, ou te menacer de retirer un soutien.\n\n**Est‚Äëce que tu as d√©j√† subi de la haine ou du chantage en ligne li√© √† ta pratique ?**` },
  { id:16, title:"Photos intimes prises ou diffus√©es sans ton accord",
    text:`Des personnes prennent des photos quand tu te changes ou te poussent √† partager des images intimes. C‚Äôest humiliant et interdit par la loi.\n\n**As‚Äëtu d√©j√† √©t√© pris¬∑e en photo ou pouss√©¬∑e √† partager des images intimes sans accord ?**` },
  { id:17, title:"On te prive de mat√©riel, de soins, de boire ou de manger",
    text:`On te retire ce dont tu as besoin (soins, eau, nourriture, mat√©riel) pour te ‚Äútester‚Äù ou t‚Äôhumilier. C‚Äôest dangereux et contraire √† ta dignit√©.\n\n**As‚Äëtu d√©j√† √©t√© priv√©¬∑e de soin, de mat√©riel, d‚Äôeau ou de nourriture pendant ta pratique ?**` },
  { id:18, title:"Attouchements, caresses, baisers sur des parties intimes",
    text:`Une personne te touche, te caresse ou t‚Äôembrasse sur des parties intimes, commente ton corps de fa√ßon d√©plac√©e, te demande des photos d√©nud√©es et exige le secret. Ce sont des agressions sexuelles, punies par la loi. Ce n‚Äôest jamais de ta faute.\n\n**T‚Äôest‚Äëil d√©j√† arriv√© de subir des gestes ou demandes sexuelles non d√©sir√©s ?**` },
  { id:19, title:"On te demande de toucher quelqu‚Äôun ou d‚Äôavoir un geste sexuel",
    text:`On te pousse √† caresser/embrasser quelqu‚Äôun en banalisant ou en te mena√ßant si tu refuses. Cela peut se produire en bizutage, en d√©placement, ou en ligne. C‚Äôest interdit et grave.\n\n**As‚Äëtu d√©j√† √©t√© pouss√©¬∑e √† poser un geste sexuel sur quelqu‚Äôun ?**` },
  { id:20, title:"Chantage au secret : ‚Äú√ßa reste entre nous‚Äù",
    text:`On te dit que vos gestes, messages ou photos doivent rester secrets, que personne ne comprendrait, ou on te menace si tu parles. C‚Äôest du chantage, interdit par la loi. Tu as le droit d‚Äô√™tre prot√©g√©¬∑e et entendu¬∑e.\n\n**As‚Äëtu d√©j√† subi un chantage au secret √† propos de gestes, messages ou images ?**` },
];

const STATE_KEY = 'miroir-intme-1-20-v1';
let state = { index:0, answers: Array(situations.length).fill(null) };
let currentTone = null; // 2,1,0 selon le dernier choix (effet imm√©diat)

// √âl√©ments
const hero = document.getElementById('hero');
const stage = document.getElementById('stage');
const nav = document.getElementById('nav');
const endcard = document.getElementById('endcard');
const sid = document.getElementById('sid');
const sTitle = document.getElementById('sTitle');
const sText = document.getElementById('sText');
const feedback = document.getElementById('feedback');
const needAnswer = document.getElementById('needAnswer');
const choices = Array.from(document.querySelectorAll('.choice'));
const nextBtn = document.getElementById('nextBtn');
const prevBtn = document.getElementById('prevBtn');
const startBtn = document.getElementById('startBtn');
const resumeBtn = document.getElementById('resumeBtn');
const barFill = document.getElementById('barFill');
const counter = document.getElementById('counter');

// Sauvegarde
const save = () => localStorage.setItem(STATE_KEY, JSON.stringify(state));
const load = () => { try { const v=JSON.parse(localStorage.getItem(STATE_KEY)); if(v && Array.isArray(v.answers)) { state=v; return true; } } catch(e){} return false; };
const reset = () => { state = { index:0, answers:Array(situations.length).fill(null)}; currentTone=null; save(); };

// Outils couleur
function lerp(a,b,t){ return a + (b-a)*t; }
function hexToRgb(h){ const m = /^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(h); return m? [parseInt(m[1],16), parseInt(m[2],16), parseInt(m[3],16)] : [255,255,255]; }
function rgbToHex(r,g,b){ return '#'+[r,g,b].map(x=>x.toString(16).padStart(2,'0')).join(''); }
function mix(c1,c2,t){ const a=hexToRgb(c1), b=hexToRgb(c2); return rgbToHex(Math.round(lerp(a[0],b[0],t)), Math.round(lerp(a[1],b[1],t)), Math.round(lerp(a[2],b[2],t))); }
function setBg(topHex,bottomHex){
  document.documentElement.style.setProperty('--bgTop', topHex);
  document.documentElement.style.setProperty('--bgBottom', bottomHex);
}

function updatePageColor(){
  const CSS = getComputedStyle(document.documentElement);
  const GREEN = CSS.getPropertyValue('--green').trim()||'#80D4A0';
  const YELLOW = CSS.getPropertyValue('--yellow').trim()||'#FFD56A';
  const RED = CSS.getPropertyValue('--red').trim()||'#F78E7B';

  // tendance globale
  const answered = state.answers.filter(v=>v!==null);
  let pg=0, py=0, pr=0;
  answered.forEach(v=>{ if(v===2) pg++; else if(v===1) py++; else if(v===0) pr++; });
  const total = Math.max(1, answered.length);
  pg/=total; py/=total; pr/=total;
  let globalTop = mix('#ffffff', mix(YELLOW, GREEN, pg/(pg+py||1)), Math.min(1,(pg+py)));
  let globalBottom = mix('#ffffff', mix(RED, YELLOW, py/(pr+py||1)), Math.min(1,(pr+py)));

  // effet imm√©diat (70% dernier choix, 30% global)
  if(currentTone!==null){
    const tone = currentTone===2? GREEN : currentTone===1? YELLOW : RED;
    globalTop = mix(globalTop, tone, 0.7);
    globalBottom = mix(globalBottom, tone, 0.7);
  }

  setBg(globalTop, globalBottom);
}

function mirror(val, id){
  if(val===2) return `üü¢ Tu sembles vivre une situation s√©curisante (#${id}). Continue √† exprimer ce qui t‚Äôaide.`;
  if(val===1) return `üü° Parfois oui, parfois non (#${id}). Note ce qui t‚Äôaide et ce qui te g√™ne, et parle‚Äëen √† une personne de confiance.`;
  return `üî¥ Tu ne te reconnais pas dans cette situation (#${id}). Ton ressenti compte : tu peux en parler √† une personne de confiance.`;
}

function updateInlineProgress(){
  const pct = Math.round((state.index)/situations.length*100);
  barFill.style.width = pct + '%';
  counter.textContent = `${state.index+1} / ${situations.length}`;
}

function setNextEnabled(enabled){ nextBtn.disabled = !enabled; }

function showSituation(i){
  const s = situations[i];
  sid.textContent = `#${s.id}`; sTitle.textContent = s.title; sText.innerHTML = s.text; // HTML pour le **gras**
  updateInlineProgress();
  choices.forEach(c=>c.classList.remove('active'));
  const val = state.answers[i];
  if(val!==null){ const found=choices.find(c=>Number(c.dataset.val)===Number(val)); if(found) found.classList.add('active'); feedback.textContent=mirror(val, s.id); feedback.classList.add('show'); setNextEnabled(true); needAnswer.style.display='none'; currentTone = val; }
  else { feedback.classList.remove('show'); feedback.textContent=''; setNextEnabled(false); needAnswer.style.display='none'; currentTone = null; }
  prevBtn.disabled = i===0; nextBtn.textContent = i===situations.length-1 ? 'Voir la synth√®se ‚Üí' : 'Suivant ‚Üí';
  updatePageColor();
}

function showEnd(){
  stage.style.display='none'; nav.style.display='none'; endcard.style.display='block'; currentTone=null; updatePageColor();
}

// √âv√©nements
startBtn.addEventListener('click', ()=>{ reset(); hero.style.display='none'; stage.style.display='block'; nav.style.display='flex'; endcard.style.display='none'; showSituation(0); });
resumeBtn.addEventListener('click', ()=>{ const ok=load(); hero.style.display='none'; stage.style.display='block'; nav.style.display='flex'; endcard.style.display='none'; showSituation(state.index||0); updatePageColor(); });
choices.forEach(btn=>btn.addEventListener('click', ()=>{ const val=Number(btn.dataset.val); state.answers[state.index]=val; save(); choices.forEach(c=>c.classList.remove('active')); btn.classList.add('active'); feedback.textContent=mirror(val, situations[state.index].id); feedback.classList.add('show'); setNextEnabled(true); needAnswer.style.display='none'; currentTone = val; updatePageColor(); }));
nextBtn.addEventListener('click', ()=>{
  if(nextBtn.disabled){ needAnswer.style.display='inline-block'; nextBtn.classList.add('shake'); setTimeout(()=>nextBtn.classList.remove('shake'), 400); return; }
  if(state.index < situations.length-1){ state.index++; save(); showSituation(state.index); }
  else { showEnd(); }
});
prevBtn.addEventListener('click', ()=>{ if(state.index>0){ state.index--; save(); showSituation(state.index); } });

// Init bouton Reprendre + initialisation couleurs
if(load()){ resumeBtn.style.display='inline-flex'; } else { resumeBtn.style.display='none'; }
updatePageColor();
</script>
</body>
</html>
    
  </body>
  
</html>
