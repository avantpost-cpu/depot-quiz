<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>miroir_intme – 20 situations</title>
<style>
  :root{
    /* Couleurs (douces mais franches) */
    --ink:#0f2230; --muted:#5a7387; --blue:#6aa6d8;
    --green:#80D4A0; /* sécurité */
    --yellow:#FFD56A; /* vigilance */
    --red:#F78E7B; /* alerte corail humain */
    --card:#ffffff; --shadow:0 8px 30px rgba(15,34,48,.10); --radius:18px;
    /* Dégradé coloré superposé à la mosaïque */
    --bgTop:#ffffff; --bgBottom:#ffffff; --overlay:82%;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: Inter, Roboto, system-ui, -apple-system, Segoe UI, Helvetica, Arial; color:var(--ink);
    min-height:100svh; display:flex; align-items:center; justify-content:center; padding:20px;
    transition:background 600ms ease;
    /* Mosaïque + dégradé piloté par JS via CSS vars */
    background-image: linear-gradient(180deg,
      color-mix(in srgb, var(--bgTop) var(--overlay), transparent),
      color-mix(in srgb, var(--bgBottom) var(--overlay), transparent) 55%),
      url('https://avantpost-cpu.github.io/depot-quiz/consequences/livre/fond.jpg');
    background-repeat: repeat;
    background-size: auto;
    background-attachment: fixed;
  }
  .app{ width:min(980px,100%); }

  /* Header image + sous-titre */
  .header{ display:block; text-align:center; margin:8px 0 14px; }
  .header-img{ display:block; margin:0 auto 8px; max-height:160px; width:auto; border-radius:10px; box-shadow: var(--shadow); }
  .subtitle{ text-align:center; color:#6b7f92; font-style:italic; margin:0 0 10px; }

  .card{ background:rgba(255,255,255,0.92); border-radius:var(--radius); box-shadow: var(--shadow); overflow:hidden; }
  .hero{ padding:24px; display:grid; grid-template-columns:1fr; gap:16px; }
  .hero p{ margin:0; color:var(--muted); text-align:center; }
  .cta{ display:flex; gap:12px; margin-top:6px; justify-content:center; flex-wrap:wrap; }
  .btn{ appearance:none; border:0; background:#6aa6d8; color:white; padding:12px 16px; border-radius:14px; font-weight:700; cursor:pointer; box-shadow:0 8px 16px rgba(106,166,216,.25); transition:.2s transform,.2s box-shadow,.2s opacity,.2s filter; }
  .btn:hover{ transform: translateY(-1px); box-shadow:0 10px 20px rgba(106,166,216,.32); }
  .btn.secondary{ background:#edf5ff; color:#2b5ea8; box-shadow:none; }
  .btn[disabled]{ opacity:.6; filter:grayscale(.25); cursor:not-allowed; }

  .stage{ padding:18px; display:none; }
  .situation{ display:grid; gap:12px; }
  .s-head{ display:flex; align-items:flex-start; gap:12px; }
  .badge{ background:#eef7ff; color:#2b5ea8; font-weight:700; padding:6px 10px; border-radius:10px; }
  .s-title{ margin:2px 0 0; font-size:clamp(18px,2.4vw,22px); }
  .s-text{ color:var(--muted); line-height:1.65; white-space:pre-wrap; }

  /* Jauge colorée intégrée dans la carte */
  .inline-progress{ display:flex; align-items:center; gap:12px; padding:6px 0 4px; }
  .ip-label{ font-size:12px; color:#5b6f86; font-weight:700; }
  .bar{ height:10px; background:#eff4f8; border-radius:999px; overflow:hidden; flex:1; }
  .bar > i{ display:block; height:100%; width:0%; background: linear-gradient(90deg, var(--green), var(--yellow), var(--red)); transition: width .3s ease; }
  .counter{ font-weight:700; font-variant-numeric: tabular-nums; color:#3c5666; }

  .choices{ display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
  @media (max-width:560px){ .choices{ grid-template-columns:1fr; } }
  .choice{ border:2px solid transparent; border-radius:16px; padding:16px; background:#f9fbfe; cursor:pointer; display:flex; align-items:flex-start; gap:12px; text-align:left; box-shadow: var(--shadow); transition:.2s transform; }
  .choice:hover{ transform: translateY(-2px); }
  .choice i{ font-size:22px; line-height:1; }
  .choice .label{ display:block; font-weight:800; font-size:22px; line-height:1.15; }
  .choice[data-val="2"] .label{ color:#1a8a56; }
  .choice[data-val="1"] .label{ color:#b58500; }
  .choice[data-val="0"] .label{ color:#c25445; }
  .choice small{ display:block; font-weight:500; color:#5f7287; margin-top:6px; font-size:13px; }
  .choice.active{ outline:3px solid rgba(106,166,216,.55); background:#fff; }

  .feedback{ margin-top:6px; padding:12px 14px; border-radius:14px; background:#f6f9fc; display:none; }
  .feedback.show{ display:block; }

  .nav{ display:none; justify-content:space-between; align-items:center; padding:14px 18px; gap:10px; }
  .need-answer{ display:none; color:#7d241f; background:#fff2f1; border:1px solid #ffd7d3; padding:8px 10px; border-radius:10px; font-size:13px; font-weight:700; }
  .shake{ animation:shake .35s ease; }
  @keyframes shake{ 10%{transform:translateX(-2px)} 30%{transform:translateX(2px)} 50%{transform:translateX(-2px)} 70%{transform:translateX(2px)} 100%{transform:none} }

  .footer-note{ margin-top:4px; color:#6b7f92; font-size:12px; text-align:center; }
  .endcard{ display:none; margin-top:16px; }
</style>
</head>
<body>
  <div class="app">
    <div class="header">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/miroir.jpg" alt="Dessin d’un enfant devant un miroir" class="header-img" />
      <p class="subtitle">Un moment pour te découvrir vraiment.</p>
    </div>

    <section class="card hero" id="hero">
      <div>
        <p>Lis chaque situation. Choisis ce qui te ressemble le plus. La <strong>couleur de la page</strong> et la <strong>jauge</strong> évoluent selon tes réponses. À la fin, une synthèse bienveillante t’accompagne.</p>
        <div class="cta">
          <button class="btn" id="startBtn">Commencer</button>
          <button class="btn secondary" id="resumeBtn">Reprendre</button>
        </div>
        <p class="footer-note">Tes réponses restent sur ton appareil (localStorage). Tu peux les effacer ensuite.</p>
      </div>
    </section>

    <section class="card stage" id="stage">
      <div class="situation">
        <div class="s-head"><span class="badge" id="sid">#1</span><h2 class="s-title" id="sTitle"></h2></div>
        <p class="s-text" id="sText"></p>

        <div class="inline-progress" id="inlineProgress">
          <span class="ip-label">Ta progression</span>
          <div class="bar" aria-hidden="true"><i id="barFill"></i></div>
          <div class="counter" id="counter">1 / 20</div>
        </div>

        <div class="choices" role="group" aria-label="Choisis ton ressenti">
          <button class="choice" data-val="2"><i>🟢</i><div><span class="label">Oui</span><small>Je me reconnais vraiment dans cette situation.</small></div></button>
          <button class="choice" data-val="1"><i>🟡</i><div><span class="label">Parfois</span><small>C’est vrai à certains moments, mais pas toujours.</small></div></button>
          <button class="choice" data-val="0"><i>🔴</i><div><span class="label">Non</span><small>Ce n’est pas ce que je vis.</small></div></button>
        </div>

        <div class="feedback" id="feedback"></div>
        <div class="need-answer" id="needAnswer">👉 Choisis ta réponse pour continuer</div>
      </div>
    </section>

    <div class="nav" id="nav">
      <button class="btn secondary" id="prevBtn">← Précédent</button>
      <div class="spacer"></div>
      <button class="btn" id="nextBtn" disabled>Suivant →</button>
    </div>

    <section class="card endcard" id="endcard">
      <div style="padding:16px 18px;">
        <h2>Merci ✨</h2>
        <p class="s-text">Merci d’avoir pris ce temps pour toi. Si certaines réponses t’ont fait réfléchir, tu peux en parler à une <strong>personne de confiance</strong> (parent, autre éducateur·rice, professeur·e, médecin scolaire…), ou à un·e <strong>référent·e intégrité</strong> dans ton club. En cas de danger immédiat : <strong>112</strong>.</p>
      </div>
    </section>
  </div>

<script>
// --- Textes riches + question finale en gras — situations 1 à 20
const situations = [
  { id:1, title:"Je me sens encouragé·e dans mes efforts",
    text:`À l’entraînement, on reconnaît ce que tu fais. Ton entraîneur·e t’explique avec calme, même quand tu te trompes, et t’aide à comprendre pour progresser. On ne te crie pas dessus ni ne te rabaisse. Dans le groupe, on travaille sérieusement, on rigole aussi, et tu sens que tu peux apprendre à ton rythme et être fier·e de tes efforts.\n\n**Est-ce que tu te sens encouragé·e de cette manière ?**` },
  { id:2, title:"Les règles, les personnes et l’environnement sont respectés",
    text:`Tu connais et tu appliques les règles du sport : tu respectes l’arbitrage, tes camarades, les éducateurs et les bénévoles. Tu fais attention aux lieux (vestiaires, gymnase, transports) et à la nature quand tu pratiques dehors, ainsi qu’aux animaux partenaires si c’est le cas. Quand chacun·e fait sa part, cela crée un cadre sûr et juste pour s’entraîner.\n\n**Est-ce que ton environnement sportif est respectueux et bienveillant ?**` },
  { id:3, title:"Tu peux demander des explications librement",
    text:`Si une consigne, un geste ou un règlement n’est pas clair, tu peux demander qu’on t’explique sans être jugé·e. Quand une parole te blesse (sexiste, homophobe ou discriminatoire), tu as le droit d’en parler et d’être écouté·e. Poser des questions et dire ce qui te gêne fait partie du respect et de la progression.\n\n**Est-ce que tu peux parler librement quand quelque chose te gêne ?**` },
  { id:4, title:"Tu peux demander les adaptations dont tu as besoin",
    text:`Tu peux dire ce qui t’aide à pratiquer dans de bonnes conditions : un lieu accessible, des informations expliquées autrement, des aménagements liés à ta santé ou à un handicap. On prend tes besoins au sérieux et on cherche des solutions pour que tu participes pleinement et sereinement.\n\n**Est-ce que tes besoins sont entendus et pris en compte ?**` },
  { id:5, title:"Ton corps t’appartient : on demande ton accord pour te toucher",
    text:`Pour un geste technique, une parade ou une correction, on t’explique ce qu’on va faire et on te demande ton accord. Tu peux dire oui, non, ou proposer une autre manière de t’aider. Tu as le droit d’apprendre sans contact non désiré, et de rappeler que ton corps t’appartient.\n\n**Est‑ce qu’on te demande ton accord avant tout contact ?**` },
  { id:6, title:"Ton intimité est respectée (vestiaires, douche, aide)",
    text:`Tu choisis comment te changer et qui peut t’aider. Si tu as besoin d’une aide, elle se fait avec ton accord et dans le respect de ta pudeur. Personne ne doit entrer dans ton espace sans prévenir ni s’imposer quand tu n’es pas à l’aise. Tu peux le dire et demander un cadre plus protecteur.\n\n**Est‑ce que ton intimité est respectée, y compris quand on t’aide ?**` },
  { id:7, title:"Ton identité de genre et ton orientation sont respectées",
    text:`Tu peux vivre ton identité sans moqueries ni exclusions : prénom et pronoms respectés, accès à des vestiaires adaptés, cadre bienveillant avec le groupe et l’encadrement. Tu as le droit d’être toi‑même et de pratiquer en sécurité, sans pression ni honte.\n\n**Est‑ce que ton identité est respectée et prise en compte dans ta pratique ?**` },
  { id:8, title:"Paroles, gestes, regards qui te mettent mal à l’aise",
    text:`Parfois tu ressens une gêne sans savoir pourquoi : ambiance lourde, regards insistants, surnoms que tu n’aimes pas. Il peut y avoir des paroles méchantes, moqueuses, sexistes ou homophobes, ou au contraire trop centrées sur ton corps. Tu as le droit de dire stop et d’en parler à quelqu’un de confiance.\n\n**Est‑ce que tu vis parfois ce malaise dans ton environnement sportif ?**` },
  { id:9, title:"On t’oblige à être en sous‑vêtements à la vue des autres",
    text:`Tu peux préférer te changer à l’abri des regards et c’est ton droit. Même si une pesée ou un soin est nécessaire, cela doit se faire dans le respect de ta pudeur, par des professionnel·les, et sans public.\n\n**T’est‑il déjà arrivé qu’on t’impose d’être dévêtu·e devant d’autres alors que tu n’étais pas à l’aise ?**` },
  { id:10, title:"Entrées dans les vestiaires sans prévenir",
    text:`Les vestiaires sont des lieux d’intimité. Si des personnes entrent sans prévenir pendant que tu te changes ou te douches, tu peux te sentir exposé·e. Il peut y avoir de bonnes raisons, mais le respect de ta pudeur prime.\n\n**Est‑ce que des entrées sans prévenir t’ont déjà mis mal à l’aise ?**` },
  { id:11, title:"On t’aide à t’habiller sans te demander ton accord",
    text:`Parfois quelqu’un t’aide à te changer sans te demander si tu es d’accord. Tu peux refuser, choisir qui t’aide et comment, et demander que cela se fasse dans le respect de ta pudeur et de ton rythme.\n\n**Est‑ce qu’on t’aide parfois sans te demander clairement ton accord ?**` },
  { id:12, title:"Pressions et messages intrusifs sur les réseaux",
    text:`En ligne, tu peux recevoir des messages insistants, intrusifs ou à caractère intime. Même si cela vient d’un·e encadrant·e, d’un·e camarade ou d’un sponsor, tu as le droit de poser des limites et d’en parler si tu n’es pas respecté·e.\n\n**Est‑ce que tu vis parfois des pressions ou messages intrusifs sur les réseaux ?**` },
  { id:13, title:"On te demande de rester seul·e après l’entraînement",
    text:`Quelqu’un te demande de rester une fois que tout le monde est parti et cela te met mal à l’aise. Tu as le droit de dire non. Si tu as peur ou te sens obligé·e, parle‑en à une personne de confiance.\n\n**T’est‑il déjà arrivé de te sentir obligé·e de rester seul·e avec quelqu’un ?**` },
  { id:14, title:"Isolement, harcèlement, bizutage",
    text:`Tu es mis·e à l’écart, moqué·e, menacé·e, ou on te fait faire des choses humiliantes “pour rire”. Le harcèlement et le bizutage ne sont jamais acceptables.\n\n**As‑tu déjà été isolé·e ou harcelé·e dans ton cadre sportif ?**` },
  { id:15, title:"Haine en ligne, chantage, harcèlement numérique",
    text:`Des messages haineux, humiliants ou à caractère sexuel peuvent t’atteindre en ligne. On peut aussi te mettre la pression pour des performances, des vues, ou te menacer de retirer un soutien.\n\n**Est‑ce que tu as déjà subi de la haine ou du chantage en ligne lié à ta pratique ?**` },
  { id:16, title:"Photos intimes prises ou diffusées sans ton accord",
    text:`Des personnes prennent des photos quand tu te changes ou te poussent à partager des images intimes. C’est humiliant et interdit par la loi.\n\n**As‑tu déjà été pris·e en photo ou poussé·e à partager des images intimes sans accord ?**` },
  { id:17, title:"On te prive de matériel, de soins, de boire ou de manger",
    text:`On te retire ce dont tu as besoin (soins, eau, nourriture, matériel) pour te “tester” ou t’humilier. C’est dangereux et contraire à ta dignité.\n\n**As‑tu déjà été privé·e de soin, de matériel, d’eau ou de nourriture pendant ta pratique ?**` },
  { id:18, title:"Attouchements, caresses, baisers sur des parties intimes",
    text:`Une personne te touche, te caresse ou t’embrasse sur des parties intimes, commente ton corps de façon déplacée, te demande des photos dénudées et exige le secret. Ce sont des agressions sexuelles, punies par la loi. Ce n’est jamais de ta faute.\n\n**T’est‑il déjà arrivé de subir des gestes ou demandes sexuelles non désirés ?**` },
  { id:19, title:"On te demande de toucher quelqu’un ou d’avoir un geste sexuel",
    text:`On te pousse à caresser/embrasser quelqu’un en banalisant ou en te menaçant si tu refuses. Cela peut se produire en bizutage, en déplacement, ou en ligne. C’est interdit et grave.\n\n**As‑tu déjà été poussé·e à poser un geste sexuel sur quelqu’un ?**` },
  { id:20, title:"Chantage au secret : “ça reste entre nous”",
    text:`On te dit que vos gestes, messages ou photos doivent rester secrets, que personne ne comprendrait, ou on te menace si tu parles. C’est du chantage, interdit par la loi. Tu as le droit d’être protégé·e et entendu·e.\n\n**As‑tu déjà subi un chantage au secret à propos de gestes, messages ou images ?**` },
];

const STATE_KEY = 'miroir-intme-1-20-v1';
let state = { index:0, answers: Array(situations.length).fill(null) };
let currentTone = null; // 2,1,0 selon le dernier choix (effet immédiat)

// Éléments
const hero = document.getElementById('hero');
const stage = document.getElementById('stage');
const nav = document.getElementById('nav');
const endcard = document.getElementById('endcard');
const sid = document.getElementById('sid');
const sTitle = document.getElementById('sTitle');
const sText = document.getElementById('sText');
const feedback = document.getElementById('feedback');
const needAnswer = document.getElementById('needAnswer');
const choices = Array.from(document.querySelectorAll('.choice'));
const nextBtn = document.getElementById('nextBtn');
const prevBtn = document.getElementById('prevBtn');
const startBtn = document.getElementById('startBtn');
const resumeBtn = document.getElementById('resumeBtn');
const barFill = document.getElementById('barFill');
const counter = document.getElementById('counter');

// Sauvegarde
const save = () => localStorage.setItem(STATE_KEY, JSON.stringify(state));
const load = () => { try { const v=JSON.parse(localStorage.getItem(STATE_KEY)); if(v && Array.isArray(v.answers)) { state=v; return true; } } catch(e){} return false; };
const reset = () => { state = { index:0, answers:Array(situations.length).fill(null)}; currentTone=null; save(); };

// Outils couleur
function lerp(a,b,t){ return a + (b-a)*t; }
function hexToRgb(h){ const m = /^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(h); return m? [parseInt(m[1],16), parseInt(m[2],16), parseInt(m[3],16)] : [255,255,255]; }
function rgbToHex(r,g,b){ return '#'+[r,g,b].map(x=>x.toString(16).padStart(2,'0')).join(''); }
function mix(c1,c2,t){ const a=hexToRgb(c1), b=hexToRgb(c2); return rgbToHex(Math.round(lerp(a[0],b[0],t)), Math.round(lerp(a[1],b[1],t)), Math.round(lerp(a[2],b[2],t))); }
function setBg(topHex,bottomHex){
  document.documentElement.style.setProperty('--bgTop', topHex);
  document.documentElement.style.setProperty('--bgBottom', bottomHex);
}

function updatePageColor(){
  const CSS = getComputedStyle(document.documentElement);
  const GREEN = CSS.getPropertyValue('--green').trim()||'#80D4A0';
  const YELLOW = CSS.getPropertyValue('--yellow').trim()||'#FFD56A';
  const RED = CSS.getPropertyValue('--red').trim()||'#F78E7B';

  // tendance globale
  const answered = state.answers.filter(v=>v!==null);
  let pg=0, py=0, pr=0;
  answered.forEach(v=>{ if(v===2) pg++; else if(v===1) py++; else if(v===0) pr++; });
  const total = Math.max(1, answered.length);
  pg/=total; py/=total; pr/=total;
  let globalTop = mix('#ffffff', mix(YELLOW, GREEN, pg/(pg+py||1)), Math.min(1,(pg+py)));
  let globalBottom = mix('#ffffff', mix(RED, YELLOW, py/(pr+py||1)), Math.min(1,(pr+py)));

  // effet immédiat (70% dernier choix, 30% global)
  if(currentTone!==null){
    const tone = currentTone===2? GREEN : currentTone===1? YELLOW : RED;
    globalTop = mix(globalTop, tone, 0.7);
    globalBottom = mix(globalBottom, tone, 0.7);
  }

  setBg(globalTop, globalBottom);
}

function mirror(val, id){
  if(val===2) return `🟢 Tu sembles vivre une situation sécurisante (#${id}). Continue à exprimer ce qui t’aide.`;
  if(val===1) return `🟡 Parfois oui, parfois non (#${id}). Note ce qui t’aide et ce qui te gêne, et parle‑en à une personne de confiance.`;
  return `🔴 Tu ne te reconnais pas dans cette situation (#${id}). Ton ressenti compte : tu peux en parler à une personne de confiance.`;
}

function updateInlineProgress(){
  const pct = Math.round((state.index)/situations.length*100);
  barFill.style.width = pct + '%';
  counter.textContent = `${state.index+1} / ${situations.length}`;
}

function setNextEnabled(enabled){ nextBtn.disabled = !enabled; }

function showSituation(i){
  const s = situations[i];
  sid.textContent = `#${s.id}`; sTitle.textContent = s.title; sText.innerHTML = s.text; // HTML pour le **gras**
  updateInlineProgress();
  choices.forEach(c=>c.classList.remove('active'));
  const val = state.answers[i];
  if(val!==null){ const found=choices.find(c=>Number(c.dataset.val)===Number(val)); if(found) found.classList.add('active'); feedback.textContent=mirror(val, s.id); feedback.classList.add('show'); setNextEnabled(true); needAnswer.style.display='none'; currentTone = val; }
  else { feedback.classList.remove('show'); feedback.textContent=''; setNextEnabled(false); needAnswer.style.display='none'; currentTone = null; }
  prevBtn.disabled = i===0; nextBtn.textContent = i===situations.length-1 ? 'Voir la synthèse →' : 'Suivant →';
  updatePageColor();
}

function showEnd(){
  stage.style.display='none'; nav.style.display='none'; endcard.style.display='block'; currentTone=null; updatePageColor();
}

// Événements
startBtn.addEventListener('click', ()=>{ reset(); hero.style.display='none'; stage.style.display='block'; nav.style.display='flex'; endcard.style.display='none'; showSituation(0); });
resumeBtn.addEventListener('click', ()=>{ const ok=load(); hero.style.display='none'; stage.style.display='block'; nav.style.display='flex'; endcard.style.display='none'; showSituation(state.index||0); updatePageColor(); });
choices.forEach(btn=>btn.addEventListener('click', ()=>{ const val=Number(btn.dataset.val); state.answers[state.index]=val; save(); choices.forEach(c=>c.classList.remove('active')); btn.classList.add('active'); feedback.textContent=mirror(val, situations[state.index].id); feedback.classList.add('show'); setNextEnabled(true); needAnswer.style.display='none'; currentTone = val; updatePageColor(); }));
nextBtn.addEventListener('click', ()=>{
  if(nextBtn.disabled){ needAnswer.style.display='inline-block'; nextBtn.classList.add('shake'); setTimeout(()=>nextBtn.classList.remove('shake'), 400); return; }
  if(state.index < situations.length-1){ state.index++; save(); showSituation(state.index); }
  else { showEnd(); }
});
prevBtn.addEventListener('click', ()=>{ if(state.index>0){ state.index--; save(); showSituation(state.index); } });

// Init bouton Reprendre + initialisation couleurs
if(load()){ resumeBtn.style.display='inline-flex'; } else { resumeBtn.style.display='none'; }
updatePageColor();
</script>
</body>
</html>
    
  </body>
  
</html>
