<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>BaromÃ¨tre du Climat Ã‰thique â€” version critique</title>

<link href="https://fonts.googleapis.com/css2?family=Playwrite+IT+Moderna:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --ink:#0f2230; --muted:#5a7387;
  --radius:22px; --shadow:0 2px 20px rgba(15,34,48,.10);
}
*{box-sizing:border-box;margin:0;padding:0}

/* Base */
html,body{
  min-height:100%;
  font-family:'Inter', system-ui, -apple-system, Segoe UI, Helvetica, Arial, sans-serif;
  background:url('https://avantpost-cpu.github.io/depot-quiz/consequences/livre/fond.jpg') repeat;
  background-size:auto;
  display:flex; align-items:center; justify-content:center;
  color:var(--ink);
}
.app{width:100%;max-width:760px;text-align:center;padding:1rem;}

/* Haut : miroir + jauge */
.header-duo{display:flex;align-items:center;justify-content:center;gap:2rem;margin-bottom:1.2rem;flex-wrap:wrap;}
.header-img{max-width:340px;width:100%;height:auto;border:none;box-shadow:none;}
.jauge{ position:relative;width:100%;max-width:260px;aspect-ratio:2/1; margin:auto; }
.jauge .layer{ position:absolute;inset:0;width:100%;height:100%;object-fit:contain;transition:opacity .35s ease;pointer-events:none; }
.needle{ position:absolute;bottom:0;left:50%;height:95%;transform-origin:50% 100%;transform:translateX(-50%) rotate(-90deg);transition:transform .5s ease;pointer-events:none; }

/* Intro */
.intro{display:flex;flex-direction:column;align-items:center;text-align:center;gap:1.1rem;padding:1rem 1.2rem;}
.intro p{font-family:'Playwrite IT Moderna',cursive;font-size:clamp(1.05rem,2.4vw,1.4rem);line-height:1.55;color:#14786c;max-width:640px;}
.start-img{width:clamp(160px,40vw,220px);height:auto;cursor:pointer;transition:transform .25s ease,filter .25s ease;}
.start-img:hover{transform:scale(1.05);filter:brightness(1.1);}
.footer-note{font-size:.85rem;color:#6b7f92;}

/* Carte / contenu */
.card{
  background:rgba(255,255,255,0.96);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  position:relative; overflow:visible;
  opacity:0; transform:translateY(8px);
  transition:opacity .35s ease, transform .35s ease;
}
.card.show{ opacity:1; transform:translateY(0); }

.stage{ display:none; }
.card-body{ padding:clamp(1rem,3vw,2rem); }

/* Badge coin bleu */
.badge{
  position:absolute; top:0; left:0;
  background:#14475d; color:#fff;
  font-family:'Playwrite IT Moderna',cursive; font-weight:600; font-size:clamp(.95rem,2vw,1rem);
  padding:0.55rem 1rem 0.55rem 1.2rem;
  clip-path:polygon(0 0, 100% 0, 75% 100%, 0 100%);
  border-top-left-radius:22px; border-bottom-right-radius:6px;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
  z-index:2;
}

/* Textes */
.s-title{font-family:'Playwrite IT Moderna',cursive;font-size:clamp(1.35rem,2.5vw,1.8rem);text-align:left;margin-bottom:.6rem;color:var(--ink);}
.s-text{color:var(--muted);line-height:1.75;font-size:clamp(1rem,2.2vw,1.25rem);text-align:left;margin:auto;margin-bottom:1rem;}
.s-question{font-family:'Playwrite IT Moderna',cursive;font-weight:500;color:#14786c;font-size:clamp(1.15rem,2.4vw,1.5rem);margin:1rem auto 1rem;text-align:center;max-width:95%;}

/* Choix */
.choices{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;width:100%;}
.choice{background:transparent;border:none;padding:0;border-radius:14px;overflow:hidden;}
.choice-img{width:100%;display:block;border-radius:14px;box-shadow:var(--shadow);transition:transform .25s ease;}
.choice:hover .choice-img{transform:scale(1.03);}
.choice.active .choice-img{outline:4px solid rgba(106,166,216,.55);transform:scale(1.05);}

/* Slides */
#situation{position:relative;}
.s-slide{opacity:0;transform:translateX(36px);transition:opacity .35s ease,transform .35s ease;position:relative;}
.s-slide.show{opacity:1;transform:translateX(0);}

/* Fin + alerte */
.endcard{display:none;padding:1.4rem 1.6rem 1.8rem;font-family:'Playwrite IT Moderna',cursive;border-radius:var(--radius);}
.endcard h2{font-size:clamp(1.5rem,3vw,2rem);margin-bottom:.8rem;}
.endcard p{font-size:clamp(1rem,2vw,1.2rem);line-height:1.6;}
.alert-red{background:#fcd6d6 !important;border-left:8px solid #c71d1d;}
.alert-red h2{color:#a4161a;}
.alert-red p{color:#1a1a1a;}
.alert-red a{color:#14475d;text-decoration:underline;}
.restart-btn{margin-top:1.2rem;padding:.7rem 1.4rem;background:#14475d;color:#fff;border:none;border-radius:10px;font-size:1rem;cursor:pointer;}
.restart-btn:hover{background:#1b5f7b;}

/* Responsive */
@media(max-width:700px) and (orientation:portrait){
  html,body{min-height:100%;align-items:flex-start;justify-content:flex-start;}
  .app{padding:1rem;}
  .header-duo{flex-direction:column;gap:.6rem;margin-bottom:.6rem;}
  .header-img{max-width:220px;}
  .jauge{max-width:160px;}
  .needle{height:80%;}
  .card-body{padding:1rem;}
  .s-title{font-size:clamp(1.2rem,4.2vw,1.55rem);}
  .s-text{font-size:clamp(.97rem,3.4vw,1.15rem);line-height:1.6;}
  .s-question{font-size:clamp(1.05rem,4vw,1.35rem);margin:.8rem auto;}
  .choices{grid-template-columns:repeat(2,1fr);gap:1.2rem;margin-top:.6rem;}
  .choice{transform:scale(1.22);transform-origin:center;}
  body{overflow-y:auto;}
}
</style>
</head>
<body>
<div class="app">

  <!-- Haut : miroir + jauge -->
  <div class="header-duo">
    <img src="https://avantpost-cpu.github.io/depot-quiz/outil/miroir.png" alt="Illustration miroir" class="header-img">
    <div class="jauge" id="jauge">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/jaugeA.png" class="layer green" id="layerGreen" alt="">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/jaugeA2.png" class="layer yellow" id="layerYellow" alt="">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/jaugeA3.png" class="layer red" id="layerRed" alt="">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/aiguille.png" class="needle" id="needle" alt="">
    </div>
  </div>

  <!-- Intro -->
  <section class="intro" id="intro">
    <p>Ce baromÃ¨tre propose <strong>20 situations</strong> issues du terrain. Il vous aide Ã  Ã©valuer la qualitÃ© du <strong>climat Ã©thique</strong> dans votre pratique sportive ou Ã©ducative.<br>RÃ©pondez avec sincÃ©ritÃ© : lâ€™objectif est de rester <strong>dans le vert</strong> (ðŸŸ¢ Oui / ðŸŸ¡ Parfois / ðŸ”´ Non).<br>En cas de rÃ©ponse <strong>Â« Non Â» Ã  une question critique</strong>, le test sâ€™interrompt pour afficher une alerte prioritaire.</p>
    <img src="https://avantpost-cpu.github.io/depot-quiz/outil/start.png" alt="Commencer" class="start-img" id="startImg">
    <p class="footer-note">Confidentiel â€” vos rÃ©ponses restent locales Ã  votre navigateur.</p>
  </section>

  <!-- Quiz -->
  <section class="card stage" id="stage">
    <span class="badge" id="sid">1</span>
    <div class="card-body">
      <div id="situation" aria-live="polite"></div>
    </div>
  </section>

  <!-- Alerte -->
  <section class="card endcard alert-red" id="alertCard">
    <h2>ðŸ”´ Alerte prioritaire â€“ Risque majeur dÃ©tectÃ©</h2>
    <p>Votre rÃ©ponse indique une situation <strong>Ã  risque grave</strong> concernant la sÃ©curitÃ© ou lâ€™intÃ©gritÃ© dâ€™une personne.</p>
    <p>Ce type de situation nÃ©cessite une <strong>rÃ©action immÃ©diate</strong> :</p>
    <ul style="text-align:left;max-width:600px;margin:0 auto 1rem;line-height:1.6;">
      <li>ðŸ‘‰ Si un danger est prÃ©sent <strong>immÃ©diatement</strong>, appelez le <strong>112</strong>.</li>
      <li>ðŸ‘‰ Si vous Ãªtes tÃ©moin ou concernÃ©Â·e, contactez votre <strong>rÃ©fÃ©rentÂ·e protection</strong>, la <strong>CRIP</strong> (Cellule de Recueil des Informations PrÃ©occupantes) ou le <strong>Procureur</strong>.</li>
      <li>ðŸ‘‰ Ne restez pas seulÂ·e avec ce doute : <strong>parlez-en, signalez, agissez.</strong></li>
    </ul>
    <p>ðŸ”— Ressources complÃ©mentaires sur <a href="https://assorebond.com/signalement" target="_blank">assorebond.com/signalement</a></p>
    <button class="restart-btn" id="restartBtn">Recommencer le test</button>
  </section>

</div>

<script>
const situations = [
  {id:1,severity:"normal",title:"Encourager sans pression",text:"Dans votre rÃ´le dâ€™encadrantÂ·e, vous valorisez les efforts avant les rÃ©sultats et refusez toute forme dâ€™humiliation.",question:"Vous maintenez un climat dâ€™encouragement sans crÃ©er de pression inutile."},
  {id:2,severity:"normal",title:"Respect du cadre et des personnes",text:"Vous veillez Ã  un respect rÃ©ciproque entre collÃ¨gues, jeunes, familles, arbitres et bÃ©nÃ©voles.",question:"Vous contribuez Ã  un environnement juste et respectueux."},
  {id:3,severity:"normal",title:"Communication et Ã©coute",text:"Vous favorisez une parole libre et respectueuse. ChacunÂ·e peut poser des questions ou exprimer un dÃ©saccord sans crainte de jugement.",question:"Vous crÃ©ez un climat dâ€™Ã©coute et de dialogue constructif."},
  {id:4,severity:"normal",title:"Gestion des Ã©motions et du stress",text:"Vous rÃ©gulez vos Ã©motions pour ne pas transmettre de tension au groupe.",question:"Vous parvenez Ã  gÃ©rer vos rÃ©actions pour prÃ©server un climat apaisÃ©."},
  {id:5,severity:"normal",title:"Inclusion et Ã©galitÃ©",text:"Vous veillez Ã  ce que chaque personne trouve sa place, quelles que soient ses diffÃ©rences.",question:"Vous agissez concrÃ¨tement pour un cadre inclusif et non discriminant."},
  {id:6,severity:"critical",title:"Consentement et contact (critique)",text:"Avant tout contact physique (correction, aide, dÃ©monstration), vous expliquez le geste et demandez lâ€™accord explicite.",question:"Vous demandez systÃ©matiquement le consentement avant tout contact."},
  {id:7,severity:"critical",title:"Respect de lâ€™intimitÃ© (critique)",text:"Vous respectez les espaces privÃ©s (vestiaires, douche, soins).",question:"Vous prÃ©servez toujours la pudeur et lâ€™intimitÃ© des personnes encadrÃ©es."},
  {id:8,severity:"normal",title:"Langage et attitudes",text:"Vous bannissez tout propos ou geste dÃ©valorisant, sexiste, homophobe, raciste ou humiliant.",question:"Vous adoptez une communication respectueuse en toutes circonstances."},
  {id:9,severity:"normal",title:"Posture dâ€™autoritÃ©",text:"Vous utilisez votre autoritÃ© pour encadrer et protÃ©ger, pas pour dominer.",question:"Votre autoritÃ© reste au service du dÃ©veloppement, jamais du contrÃ´le."},
  {id:10,severity:"normal",title:"ExemplaritÃ© et confiance",text:"Vous incarnez les valeurs que vous transmettez et tenez vos engagements.",question:"Vous Ãªtes perÃ§uÂ·e comme une personne de confiance et de rÃ©fÃ©rence."},
  {id:11,severity:"normal",title:"Ã‰quilibre engagement / limites",text:"Vous respectez vos limites et celles des autres.",question:"Vous maintenez un rapport sain entre engagement et disponibilitÃ©."},
  {id:12,severity:"normal",title:"Gestion des conflits",text:"Vous traitez les tensions de maniÃ¨re posÃ©e et Ã©quitable.",question:"Vous contribuez Ã  apaiser les conflits plutÃ´t quâ€™Ã  les amplifier."},
  {id:13,severity:"normal",title:"Transparence et collaboration",text:"Vous partagez lâ€™information utile avec les personnes concernÃ©es.",question:"Vous pratiquez une communication claire, loyale et proportionnÃ©e."},
  {id:14,severity:"normal",title:"Formation continue",text:"Vous vous tenez informÃ©Â·e des bonnes pratiques et obligations lÃ©gales.",question:"Vous actualisez vos connaissances pour garantir un cadre sÃ»r."},
  {id:15,severity:"normal",title:"Usage du numÃ©rique et des rÃ©seaux",text:"Vous gardez une distance professionnelle en ligne.",question:"Vous adoptez un usage Ã©thique et responsable des outils numÃ©riques."},
  {id:16,severity:"normal",title:"RepÃ©rage du mal-Ãªtre",text:"Vous restez attentifÂ·ve aux signaux faibles de souffrance ou dâ€™isolement.",question:"Vous savez repÃ©rer et accompagner lâ€™expression dâ€™un mal-Ãªtre."},
  {id:17,severity:"critical",title:"Situations Ã  huis clos et isolement (critique)",text:"Vous Ã©vitez de vous retrouver seulÂ·e avec une personne encadrÃ©e sans raison valable.",question:"Vous prÃ©venez les situations dâ€™isolement Ã  risque et les huis clos injustifiÃ©s."},
  {id:18,severity:"critical",title:"Images et donnÃ©es personnelles (critique)",text:"Vous ne prenez ni ne diffusez de photos/vidÃ©os sans autorisation formelle.",question:"Vous respectez strictement le droit Ã  lâ€™image et la confidentialitÃ©."},
  {id:19,severity:"critical",title:"Pressions, chantage et comportements inappropriÃ©s (critique)",text:"Vous refusez toute pression, chantage ou contrepartie implicite.",question:"Vous identifiez et endiguez les pressions ou comportements inappropriÃ©s."},
  {id:20,severity:"critical",title:"Signalement et protection (critique)",text:"Vous connaissez vos interlocuteurs et les procÃ©dures Ã  suivre en cas de situation prÃ©occupante.",question:"Vous savez comment agir et Ã  qui signaler pour protÃ©ger efficacement."}
];

let state={index:0,answers:Array(situations.length).fill(null)},anim=false;
const intro=document.getElementById('intro'),stage=document.getElementById('stage'),alertCard=document.getElementById('alertCard'),sid=document.getElementById('sid'),situationDiv=document.getElementById('situation');
const needle=document.getElementById('needle'),layerGreen=document.getElementById('layerGreen'),layerYellow=document.getElementById('layerYellow'),layerRed=document.getElementById('layerRed');

/* ===== Jauge ===== */
function updateGauge(){
  const answered=state.answers.filter(v=>v!==null);
  const n=answered.length;
  if(!n){layerGreen.style.opacity=1;layerYellow.style.opacity=0;layerRed.style.opacity=0;needle.style.transform='translateX(-50%) rotate(-90deg)';return;}
  const yes=answered.filter(v=>v===2).length;const mid=answered.filter(v=>v===1).length;const no=answered.filter(v=>v===0).length;
  const rN=no/n,rP=mid/n;
  layerGreen.style.opacity=Math.max(0,1-(rP+rN*1.2));layerYellow.style.opacity=Math.min(1,rP+rN*0.3);layerRed.style.opacity=Math.min(1,rN*1.5);
  const angle=-90+180*(n/situations.length);needle.style.transform=`translateX(-50%) rotate(${angle}deg)`;
}

/* ===== Slides ===== */
function buildSlide(i){
  const s=situations[i];
  const slide=document.createElement('div');
  slide.className='s-slide show';
  slide.innerHTML=`
    <div class="s-head"><h2 class="s-title">${s.title}</h2></div>
    <p class="s-text">${s.text}</p>
    <p class="s-question">${s.question}</p>
    <div class="choices">
      <button class="choice" data-val="2"><img src="https://avantpost-cpu.github.io/depot-quiz/outil/boutonA.png" class="choice-img" alt="Oui"></button>
      <button class="choice" data-val="1"><img src="https://avantpost-cpu.github.io/depot-quiz/outil/boutonC.png" class="choice-img" alt="Parfois"></button>
      <button class="choice" data-val="0"><img src="https://avantpost-cpu.github.io/depot-quiz/outil/boutonB.png" class="choice-img" alt="Non"></button>
    </div>`;
  slide.querySelectorAll('.choice').forEach(btn=>{
    btn.addEventListener('click',()=>{
      if(anim)return;
      const val=+btn.dataset.val;
      state.answers[state.index]=val;
      slide.querySelectorAll('.choice').forEach(c=>c.classList.remove('active'));
      btn.classList.add('active');
      updateGauge();

      // STOP si critique et rÃ©ponse = Non
      if(s.severity==="critical" && val===0){
        showAlert(s);
        return;
      }

      if(state.index<situations.length-1){goTo(state.index+1);}else{showAlert(null);} 
    });
  });
  return slide;
}

/* ===== Navigation ===== */
function goTo(next){
  if(anim)return;anim=true;
  const old=situationDiv.querySelector('.s-slide');
  const neu=buildSlide(next);
  neu.style.position='absolute';neu.style.left='0';neu.style.top='0';neu.style.width='100%';neu.style.opacity='0';neu.style.transform='translateX(36px)';
  situationDiv.appendChild(neu);
  requestAnimationFrame(()=>{neu.style.opacity='1';neu.style.transform='translateX(0)';if(old)old.style.opacity='0';});
  setTimeout(()=>{if(old)old.remove();neu.style.position='relative';state.index=next;sid.textContent=situations[next].id;updateGauge();anim=false;},380);
}

/* ===== Alerte ===== */
function showAlert(situation){
  stage.style.display='none';
  alertCard.style.display='block';
  alertCard.classList.add('show');
  if(situation){console.warn("ALERTE CRITIQUE :",situation.title);}
}

/* ===== Recommencer ===== */
document.getElementById('restartBtn').addEventListener('click',()=>{
  alertCard.style.display='none';
  intro.style.display='block';
  state={index:0,answers:Array(situations.length).fill(null)};
  updateGauge();
});

/* ===== DÃ©marrage ===== */
document.getElementById('startImg').addEventListener('click',()=>{
  intro.style.display='none';
  stage.style.display='block';
  stage.classList.add('show');
  situationDiv.innerHTML='';
  situationDiv.appendChild(buildSlide(0));
  sid.textContent=situations[0].id;
  updateGauge();
});
</script>
</body>
</html>
    
  </body>
  
</html>
