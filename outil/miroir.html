<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Baromètre du Climat Éthique — 8 situations</title>

<link href="https://fonts.googleapis.com/css2?family=Playwrite+IT+Moderna:wght@400;600&display=swap" rel="stylesheet">

<style>
:root{
  --ink:#0f2230; --muted:#5a7387;
  --radius:22px; --shadow:0 2px 20px rgba(15,34,48,.10);
}
*{box-sizing:border-box;margin:0;padding:0}

/* Base */
html,body{
  min-height:100%;
  font-family:'Inter', system-ui, -apple-system, Segoe UI, Helvetica, Arial, sans-serif;
  background:url('https://avantpost-cpu.github.io/depot-quiz/consequences/livre/fond.jpg') repeat;
  background-size:auto;
  display:flex; align-items:center; justify-content:center;
  color:var(--ink);
}
.app{width:100%;max-width:760px;text-align:center;padding:1rem;}

/* Haut : miroir + jauge */
.header-duo{display:flex;align-items:center;justify-content:center;gap:2rem;margin-bottom:1.2rem;flex-wrap:wrap;}
.header-img{max-width:340px;width:100%;height:auto;border:none;box-shadow:none;}
.jauge{ position:relative;width:100%;max-width:260px;aspect-ratio:2/1; margin:auto; }
.jauge .layer{ position:absolute;inset:0;width:100%;height:100%;object-fit:contain;transition:opacity .35s ease;pointer-events:none; }
.needle{ position:absolute;bottom:0;left:50%;height:95%;transform-origin:50% 100%;transform:translateX(-50%) rotate(-90deg);transition:transform .5s ease;pointer-events:none; }

/* Intro */
.intro{display:flex;flex-direction:column;align-items:center;text-align:center;gap:1.1rem;padding:1rem 1.2rem;}
.intro p{font-family:'Playwrite IT Moderna',cursive;font-size:clamp(1.05rem,2.4vw,1.4rem);line-height:1.55;color:#14786c;max-width:620px;}
.start-img{width:clamp(160px,40vw,220px);height:auto;cursor:pointer;transition:transform .25s ease,filter .25s ease;}
.start-img:hover{transform:scale(1.05);filter:brightness(1.1);}
.footer-note{font-size:.85rem;color:#6b7f92;}

/* Carte / contenu */
.card{
  background:rgba(255,255,255,0.96);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  position:relative; overflow:visible;
  opacity:0; transform:translateY(8px);
  transition:opacity .35s ease, transform .35s ease;
}
.card.show{ opacity:1; transform:translateY(0); }

.stage{ display:none; }
.card-body{ padding:clamp(1rem,3vw,2rem); }

/* Badge coin bleu */
.badge{
  position:absolute; top:0; left:0;
  background:#14475d; color:#fff;
  font-family:'Playwrite IT Moderna',cursive; font-weight:600; font-size:clamp(.95rem,2vw,1rem);
  padding:0.55rem 1rem 0.55rem 1.2rem;
  clip-path:polygon(0 0, 100% 0, 75% 100%, 0 100%);
  border-top-left-radius:22px; border-bottom-right-radius:6px;
  box-shadow:0 2px 6px rgba(0,0,0,0.15);
  z-index:2;
}

/* Textes */
.s-title{
  font-family:'Playwrite IT Moderna',cursive;
  font-size:clamp(1.35rem,2.5vw,1.8rem);
  text-align:left; margin-bottom:.6rem; color:var(--ink);
}
.s-text{
  color:var(--muted); line-height:1.75;
  font-size:clamp(1rem,2.2vw,1.25rem);
  text-align:left; margin:auto; margin-bottom:1rem;
}
.s-question{
  font-family:'Playwrite IT Moderna',cursive; font-weight:500; color:#14786c;
  font-size:clamp(1.15rem,2.4vw,1.5rem);
  margin:1rem auto 1rem; text-align:center; max-width:95%;
}

/* Choix */
.choices{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
  gap:1rem; width:100%;
}
.choice{ background:transparent; border:none; padding:0; border-radius:14px; overflow:hidden; }
.choice-img{ width:100%; display:block; border-radius:14px; box-shadow:var(--shadow); transition:transform .25s ease; }
.choice:hover .choice-img{ transform:scale(1.03); }
.choice.active .choice-img{ outline:4px solid rgba(106,166,216,.55); transform:scale(1.05); }

/* Slides */
#situation{ position:relative; }
.s-slide{ opacity:0; transform:translateX(36px); transition:opacity .35s ease, transform .35s ease; position:relative; }
.s-slide.show{ opacity:1; transform:translateX(0); }

/* Fin */
.endcard{ display:none; padding:1.4rem 1.6rem 1.8rem; font-family:'Playwrite IT Moderna',cursive; border-radius:var(--radius); }
.endcard h2{ font-size:clamp(1.5rem,3vw,2rem); margin-bottom:.8rem; }
.endcard p{ font-size:clamp(1rem,2vw,1.2rem); line-height:1.6; }
.summary{ margin-top:0.6rem; font-size:.95rem; color:#31495b; }

/* Responsive portrait */
@media(max-width:700px) and (orientation:portrait){
  html, body { min-height:100%; align-items:flex-start; justify-content:flex-start; }
  .app{ padding:1rem; }
  .header-duo{ flex-direction:column; gap:.6rem; margin-bottom:.6rem; }
  .header-img{ max-width:220px; }
  .jauge{ max-width:160px; }
  .needle{ height:80%; }
  .card-body{ padding:1rem; }
  .s-title{ font-size:clamp(1.2rem,4.2vw,1.55rem); }
  .s-text{ font-size:clamp(.97rem,3.4vw,1.15rem); line-height:1.6; }
  .s-question{ font-size:clamp(1.05rem,4vw,1.35rem); margin:0.8rem auto; }
  .choices{ grid-template-columns:repeat(2,1fr); gap:1.2rem; margin-top:.6rem; }
  .choice{ transform:scale(1.22); transform-origin:center; }
  body{ overflow-y:auto; }
}
</style>
</head>
<body>
<div class="app">

  <!-- Haut : miroir + jauge -->
  <div class="header-duo">
    <img src="https://avantpost-cpu.github.io/depot-quiz/outil/miroir.png" alt="Illustration miroir" class="header-img">
    <div class="jauge" id="jauge">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/jaugeA.png" class="layer green" id="layerGreen" alt="">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/jaugeA2.png" class="layer yellow" id="layerYellow" alt="">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/jaugeA3.png" class="layer red" id="layerRed" alt="">
      <img src="https://avantpost-cpu.github.io/depot-quiz/outil/aiguille.png" class="needle" id="needle" alt="">
    </div>
  </div>

  <!-- Intro -->
  <section class="intro" id="intro">
    <p>Ce baromètre propose 8 situations issues du terrain. Il vous aide à évaluer la qualité du <strong>climat éthique</strong> dans votre pratique sportive ou éducative. Répondez avec sincérité : l’objectif est de rester <strong>dans le vert</strong>.</p>
    <img src="https://avantpost-cpu.github.io/depot-quiz/outil/start.png" alt="Commencer" class="start-img" id="startImg">
    <p class="footer-note">Confidentiel — vos réponses restent locales à votre navigateur.</p>
  </section>

  <!-- Quiz -->
  <section class="card stage" id="stage">
    <span class="badge" id="sid">1</span>
    <div class="card-body">
      <div id="situation" aria-live="polite"></div>
    </div>
  </section>

  <!-- Fin -->
  <section class="card endcard" id="endcard" aria-live="polite">
    <h2 id="endTitle">Merci ✨</h2>
    <p id="endMsg">Ce baromètre vous aide à repérer vos forces et vos zones de vigilance. Utilisez ces éléments pour nourrir votre plan d’action ou un temps d’échange collectif.</p>
    <p class="summary" id="endSummary"></p>
  </section>

</div>

<script>
/* ===== Données : 8 situations (version "vous") ===== */
const situations = [
  {
    id:1,
    title:"Encourager sans pression",
    text:`Dans votre rôle d’encadrant·e, vous valorisez les efforts avant les résultats. Vous expliquez les erreurs avec calme et bienveillance, sans humilier ni mettre en difficulté.`,
    question:"Vous maintenez un climat d’encouragement sans créer de pression inutile."
  },
  {
    id:2,
    title:"Respect du cadre et des personnes",
    text:`Vous veillez à ce que le respect soit réciproque entre collègues, jeunes, familles et bénévoles. Vous agissez pour que les règles et les valeurs du sport s’appliquent à toutes et tous, sans exception.`,
    question:"Vous contribuez à un environnement juste et respectueux."
  },
  {
    id:3,
    title:"Consentement et contact",
    text:`Avant tout contact physique (correction, aide, démonstration), vous expliquez le geste et demandez l’accord explicite de la personne. Vous restez attentif·ve à son confort et à ses limites.`,
    question:"Vous demandez systématiquement le consentement avant tout contact."
  },
  {
    id:4,
    title:"Communication et écoute",
    text:`Vous encouragez une communication ouverte et bienveillante, où chacun·e peut poser des questions ou exprimer un désaccord sans crainte.`,
    question:"Vous créez un climat d’écoute et de dialogue constructif."
  },
  {
    id:5,
    title:"Gestion des émotions et du stress",
    text:`Vous savez réguler vos émotions pour ne pas transmettre de stress au groupe et restez cohérent·e en cas de désaccord.`,
    question:"Vous parvenez à gérer vos réactions pour préserver un climat apaisé."
  },
  {
    id:6,
    title:"Inclusion et égalité",
    text:`Vous veillez à ce que chaque personne trouve sa place, quelles que soient ses différences, et vous agissez concrètement pour un cadre non discriminant.`,
    question:"Vous contribuez activement à un environnement égalitaire et inclusif."
  },
  {
    id:7,
    title:"Usage du numérique et des réseaux",
    text:`Vous utilisez les outils numériques avec discernement et conservez une distance professionnelle ; vous ne partagez jamais de contenu personnel ou sensible.`,
    question:"Vous adoptez un usage éthique et responsable du numérique."
  },
  {
    id:8,
    title:"Protection et signalement",
    text:`Vous connaissez les démarches à suivre en cas de situation à risque ou de suspicion de violence et vous n’hésitez pas à demander conseil pour protéger les personnes concernées.`,
    question:"Vous agissez concrètement pour la prévention et la protection dans votre environnement."
  }
];

/* ===== État + refs ===== */
let state={index:0,answers:Array(situations.length).fill(null)}, anim=false;

const intro=document.getElementById('intro'),
      stage=document.getElementById('stage'),
      endcard=document.getElementById('endcard'),
      sid=document.getElementById('sid'),
      situationDiv=document.getElementById('situation');

const needle=document.getElementById('needle'),
      layerGreen=document.getElementById('layerGreen'),
      layerYellow=document.getElementById('layerYellow'),
      layerRed=document.getElementById('layerRed');

/* ===== Jauge ===== */
function updateGauge(){
  const answered=state.answers.filter(v=>v!==null);
  const n=answered.length;
  if(!n){
    layerGreen.style.opacity=1; layerYellow.style.opacity=0; layerRed.style.opacity=0;
    needle.style.transform='translateX(-50%) rotate(-90deg)';
    return;
  }
  const yes=answered.filter(v=>v===2).length;
  const mid=answered.filter(v=>v===1).length;
  const no =answered.filter(v=>v===0).length;

  const rN = no/n, rP = mid/n;
  layerGreen.style.opacity = Math.max(0, 1 - (rP + rN*1.2));
  layerYellow.style.opacity = Math.min(1, rP + rN*0.3);
  layerRed.style.opacity    = Math.min(1, rN*1.5);

  // Aiguille progresse avec le nombre de questions répondues
  const angle=-90 + 180*(n/situations.length);
  needle.style.transform=`translateX(-50%) rotate(${angle}deg)`;
}

/* ===== Slides ===== */
function buildSlide(i){
  const s=situations[i];
  const slide=document.createElement('div');
  slide.className='s-slide show';
  slide.innerHTML=`
    <div class="s-head"><h2 class="s-title">${s.title}</h2></div>
    <p class="s-text">${s.text}</p>
    <p class="s-question">${s.question}</p>
    <div class="choices">
      <button class="choice" data-val="2" aria-label="Oui">
        <img src="https://avantpost-cpu.github.io/depot-quiz/outil/boutonA.png" class="choice-img" alt="Oui">
      </button>
      <button class="choice" data-val="1" aria-label="Parfois">
        <img src="https://avantpost-cpu.github.io/depot-quiz/outil/boutonC.png" class="choice-img" alt="Parfois">
      </button>
      <button class="choice" data-val="0" aria-label="Non">
        <img src="https://avantpost-cpu.github.io/depot-quiz/outil/boutonB.png" class="choice-img" alt="Non">
      </button>
    </div>
  `;
  slide.querySelectorAll('.choice').forEach(btn=>{
    btn.addEventListener('click',()=>{
      if(anim) return;
      const val=+btn.dataset.val;
      state.answers[state.index]=val;
      slide.querySelectorAll('.choice').forEach(c=>c.classList.remove('active'));
      btn.classList.add('active');
      updateGauge();

      if(state.index < situations.length-1){
        goTo(state.index+1);
      } else {
        showSummary();
      }
    });
  });
  return slide;
}

function goTo(next){
  if(anim) return; anim=true;
  const old=situationDiv.querySelector('.s-slide');
  const neu=buildSlide(next);
  neu.style.position='absolute'; neu.style.left='0'; neu.style.top='0'; neu.style.width='100%';
  neu.style.opacity='0'; neu.style.transform='translateX(36px)';
  situationDiv.appendChild(neu);

  requestAnimationFrame(()=>{
    neu.style.opacity='1'; neu.style.transform='translateX(0)';
    if(old) old.style.opacity='0';
  });

  setTimeout(()=>{
    if(old) old.remove();
    neu.style.position='relative';
    state.index=next; sid.textContent=situations[next].id;
    updateGauge(); anim=false;
  }, 380);
}

/* ===== Synthèse finale conditionnelle ===== */
function showSummary(){
  stage.style.display='none';

  const answered=state.answers.filter(v=>v!==null);
  const yes=answered.filter(v=>v===2).length;
  const mid=answered.filter(v=>v===1).length;
  const no =answered.filter(v=>v===0).length;

  // Déterminer la dominante
  let dominant = 'green', title='Bravo ! 🟢', msg='Votre posture traduit un engagement fort pour un cadre éthique et protecteur. Continuez à être un repère positif dans votre environnement.';
  let bg = '#c7e8d4'; // vert doux
  if(mid >= yes && mid >= no){
    dominant = 'yellow';
    title='Points de vigilance 🟡';
    msg='Vous manifestez une réelle attention à l’éthique, avec quelques zones de vigilance. Identifiez 2–3 actions prioritaires pour renforcer votre posture.';
    bg = '#fff4cc';
  }
  if(no > yes && no >= mid){
    dominant = 'red';
    title='À corriger rapidement 🔴';
    msg='Plusieurs réponses indiquent des risques. Il est essentiel d’en parler ou de vous faire accompagner pour rétablir un cadre sécurisant et conforme aux valeurs de protection.';
    bg = '#fcd6d6';
  }

  const endTitle = document.getElementById('endTitle');
  const endMsg   = document.getElementById('endMsg');
  const endSum   = document.getElementById('endSummary');

  endTitle.textContent = title;
  endMsg.textContent   = msg;
  endSum.textContent   = `Résumé : ${yes}× Oui (vert) • ${mid}× Parfois (jaune) • ${no}× Non (rouge) sur ${situations.length} questions.`;

  endcard.style.background = bg;
  endcard.style.display = 'block';
  endcard.classList.add('show');

  // Mettre la jauge au complet (aiguille plein parcours)
  needle.style.transform='translateX(-50%) rotate(90deg)';
}

/* ===== Démarrage ===== */
document.getElementById('startImg').addEventListener('click',()=>{
  intro.style.display='none';
  stage.style.display='block';
  stage.classList.add('show');

  situationDiv.innerHTML='';
  situationDiv.appendChild(buildSlide(0));

  sid.textContent=situations[0].id;
  updateGauge();
});
</script>
</body>
</html>
    
  </body>
  
</html>
