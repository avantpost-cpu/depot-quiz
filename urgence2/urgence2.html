<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Module e-learning stable</title>

<style>
/* ---------- BASE ---------- */
body {
  margin: 0;
  background: #fff;
  display: flex;
  justify-content: center;
  font-family: Arial, sans-serif;
}

.container {
  width: 100%;
  max-width: 400px;
}

/* ---------- LIGNES ---------- */
.row {
  display: flex;
  margin: 0;
  padding: 0;
  line-height: 0;
}

.row img,
.row video {
  display: block;
  user-select: none;
  -webkit-user-drag: none;
  object-fit: cover;
  height: 100%;
}

/* Ligne 1 */
.row-1 { height: 240px; }
.row-1 img { width: 120%; }

/* Ligne 2 */
.row-2 { height: 124px; }
.row-2 video,
.row-2 .highlight {
  flex: 1 2 8;
  width: 80.333%;
}

/* Ligne 3 */
.row-3 { height: 90px; }
.row-3 .highlight {
  flex: 0 0 50%;
}

/* Ligne 4 */
.row-4 { height: 100px; }
.row-4 .highlight {
  flex: 1;
}

/* Ligne 5 (NOUVEAU â€“ 2 boutons) */
.row-5 { height: 80px; }
.row-5 .highlight {
  flex: 0 0 40%;
}

/* ---------- INTERACTIONS ---------- */
.highlight {
  cursor: pointer;
  position: relative;
  transition: transform 0.3s ease, opacity 0.3s ease, filter 0.3s ease;
}

.highlight-group.dim .highlight {
  filter: grayscale(100%);
  opacity: 0.2;
}

.highlight-group.dim .highlight.active {
  transform: scale(1.05);
  z-index: 10;
  filter: grayscale(0%);
  opacity: 1;
  transform-origin: center center;
}
</style>
</head>

<body>
<div class="container">

  <!-- IMAGE PRINCIPALE -->
  <div class="row row-1">
    <img id="img1"
         src="https://avantpost-cpu.github.io/depot-quiz/urgence2/1.png"
         alt="image principale">
  </div>

  <!-- GROUPE INTERACTIF -->
  <div class="highlight-group">

    <!-- Ligne 2 -->
    <div class="row row-2">
      <video autoplay muted loop playsinline>
        <source src="https://avantpost-cpu.github.io/depot-quiz/urgence2/2.mp4" type="video/mp4">
      </video>
      <img class="highlight" id="img3"
           src="https://avantpost-cpu.github.io/depot-quiz/urgence2/3.png">
      <img class="highlight" id="img4"
           src="https://avantpost-cpu.github.io/depot-quiz/urgence2/4.png">
    </div>

    <!-- Ligne 3 -->
    <div class="row row-3">
      <img class="highlight" id="img5"
           src="https://avantpost-cpu.github.io/depot-quiz/urgence2/5.png">
      <img class="highlight" id="img6"
           src="https://avantpost-cpu.github.io/depot-quiz/urgence2/6.png">
    </div>

    <!-- Ligne 4 -->
    <div class="row row-4">
      <img class="highlight" id="img7"
           src="https://avantpost-cpu.github.io/depot-quiz/urgence2/7.png">
    </div>

    <!-- Ligne 5 (NOUVEAUX BOUTONS) -->
    <div class="row row-5">
      <img class="highlight" id="img8"
           src="https://avantpost-cpu.github.io/depot-quiz/urgence2/8.png">
      <img class="highlight" id="img9"
           src="https://avantpost-cpu.github.io/depot-quiz/urgence2/8.jpg
                ">
    </div>

  </div>
</div>

<script>
(function(){
  const group = document.querySelector('.highlight-group');
  const img1 = document.getElementById('img1');
  const originalSrc = img1.src;
  const highlights = Array.from(group.querySelectorAll('.highlight'));

  const replacements = {
    img3: 'https://avantpost-cpu.github.io/depot-quiz/urgence2/1a.png',
    img4: 'https://avantpost-cpu.github.io/depot-quiz/urgence2/1b.png',
    img5: 'https://avantpost-cpu.github.io/depot-quiz/urgence2/1e.jpg',
    img6: 'https://avantpost-cpu.github.io/depot-quiz/urgence2/1d.jpg',
    img7: 'https://avantpost-cpu.github.io/depot-quiz/urgence2/1c.jpg',
    img8: 'https://avantpost-cpu.github.io/depot-quiz/urgence2/1f.jpg',
    img9: 'https://avantpost-cpu.github.io/depot-quiz/urgence2/1g.jpg'
  };

  let activeImg = null;
  const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

  function activate(img){
    highlights.forEach(h => h.classList.remove('active'));
    img.classList.add('active');
    group.classList.add('dim');
    img1.src = replacements[img.id] || originalSrc;
    activeImg = img;
  }

  function clear(){
    highlights.forEach(h => h.classList.remove('active'));
    group.classList.remove('dim');
    img1.src = originalSrc;
    activeImg = null;
  }

  highlights.forEach(img => {
    if (isTouch) {
      img.addEventListener('touchstart', e => {
        e.stopPropagation();
        activeImg === img ? clear() : activate(img);
      }, { passive:true });
    } else {
      img.addEventListener('pointerenter', () => activate(img));
      img.addEventListener('pointerleave', clear);
    }
  });

  if (isTouch) {
    document.addEventListener('touchstart', e => {
      if (!e.target.closest('.highlight')) clear();
    }, { passive:true });
  } else {
    group.addEventListener('pointerleave', clear);
  }
})();
</script>

</body>
</html>
